(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f4dd42e","chunk-cdb9cfb6","chunk-642b99a0","chunk-2fb5ed3e","chunk-8debfad4","chunk-192165dd","chunk-2d2105d3","chunk-2d230fe7"],{"0379":function(e,t,s){},"0588":function(e,t,s){},"08e4":function(e,t,s){},"0b50":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("router-view")},r=[],i=s("2877"),n={},l=Object(i["a"])(n,a,r,!1,null,null,null);t["default"]=l.exports},"0bc5":function(e,t,s){"use strict";s("5790")},1:function(e,t){},"1db4":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wscn-http404-container"},[t("div",{staticClass:"wscn-http404"},[e._m(0),e._v(" "),t("div",{staticClass:"bullshit"},[t("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._v(" "),t("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),e._v(" "),t("div",{staticClass:"bullshit__info"},[e._v("请检查您访问的地址是否正确，通常在切换用户时，若您的用户没有上个用户退出时的页面权限，也会触发此报错，请知悉，或者点击一下按钮返回首页。")]),e._v(" "),t("a",{staticClass:"bullshit__return-home",attrs:{href:""}},[e._v("返回首页")])])])])},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"pic-404"},[t("img",{staticClass:"pic-404__parent",attrs:{src:s("a36b"),alt:"404"}}),e._v(" "),t("img",{staticClass:"pic-404__child left",attrs:{src:s("26fc"),alt:"404"}}),e._v(" "),t("img",{staticClass:"pic-404__child mid",attrs:{src:s("26fc"),alt:"404"}}),e._v(" "),t("img",{staticClass:"pic-404__child right",attrs:{src:s("26fc"),alt:"404"}})])}],i={name:"Page404",computed:{message:function(){return"抱歉，您找的页面不存在。"}}},n=i,l=(s("97c5"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"171d498a",null);t["default"]=o.exports},2:function(e,t){},"21b0":function(e,t,s){},"24e2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"errPage-container"},[t("el-button",{staticClass:"pan-back-btn",attrs:{icon:"el-icon-arrow-left"},on:{click:e.back}},[e._v("\n    返回\n  ")]),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("h1",{staticClass:"text-jumbo text-ginormous"},[e._v("\n        Oops!\n      ")]),e._v("\n      gif来源"),t("a",{attrs:{href:"https://zh.airbnb.com/",target:"_blank"}},[e._v("airbnb")]),e._v(" 页面\n      "),t("h2",[e._v("你没有权限去该页面")]),e._v(" "),t("h6",[e._v("如有不满请联系你领导")]),e._v(" "),t("ul",{staticClass:"list-unstyled"},[t("li",[e._v("或者你可以去:")]),e._v(" "),t("li",{staticClass:"link-type"},[t("router-link",{attrs:{to:"/dashboard"}},[e._v("\n            回首页\n          ")])],1),e._v(" "),t("li",{staticClass:"link-type"},[t("a",{attrs:{href:"https://www.taobao.com/"}},[e._v("随便看看")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.dialogVisible=!0}}},[e._v("点我看图")])])])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"随便看"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{staticClass:"pan-img",attrs:{src:e.ewizardClap}})])],1)},r=[],i=s("cc6c"),n=s.n(i),l={name:"Page401",data:function(){return{errGif:n.a+"?"+ +new Date,ewizardClap:"https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646",dialogVisible:!1}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},o=l,c=(s("acdd"),s("2877")),u=Object(c["a"])(o,a,r,!1,null,"35ca77fc",null);t["default"]=u.exports},"26d5":function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-form-item",{attrs:{label:"工单标题"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入工单标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList.apply(null,arguments)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"模版数据"}},[t("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入模版数据",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList.apply(null,arguments)}},model:{value:e.listQuery.formData,callback:function(t){e.$set(e.listQuery,"formData",t)},expression:"listQuery.formData"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"流程"}},[t("el-select",{staticStyle:{width:"230px"},attrs:{placeholder:"请选择流程",size:"small",filterable:"",clearable:""},on:{change:e.getList},model:{value:e.listQuery.process,callback:function(t){e.$set(e.listQuery,"process",t)},expression:"listQuery.process"}},e._l(e.processValueList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),"my-create"!==e.genre?t("el-form-item",{attrs:{label:"申请人"}},[t("el-select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入当前处理人","remote-method":e.remoteUserList,loading:e.loading},on:{change:e.getList},model:{value:e.listQuery.creator,callback:function(t){e.$set(e.listQuery,"creator",t)},expression:"listQuery.creator"}},e._l(e.UserOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1):e._e(),e._v(" "),"upcoming"!==e.genre?t("el-form-item",{attrs:{label:"当前处理人"}},[t("el-select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入当前处理人","remote-method":e.remoteUserList,loading:e.loading},on:{change:e.getList},model:{value:e.listQuery.processor,callback:function(t){e.$set(e.listQuery,"processor",t)},expression:"listQuery.processor"}},e._l(e.UserOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"优先级"}},[t("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择优先级",size:"small",clearable:""},on:{change:e.getList},model:{value:e.listQuery.priority,callback:function(t){e.$set(e.listQuery,"priority",t)},expression:"listQuery.priority"}},[t("el-option",{attrs:{label:"一般",value:1}}),e._v(" "),t("el-option",{attrs:{label:"紧急",value:2}}),e._v(" "),t("el-option",{attrs:{label:"非常紧急",value:3}})],1)],1),e._v(" "),"upcoming"!==e.genre?t("el-form-item",{attrs:{label:"是否结束"}},[t("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"请选择状态",size:"small",clearable:""},on:{change:e.getList},model:{value:e.listQuery.isEnd,callback:function(t){e.$set(e.listQuery,"isEnd",t)},expression:"listQuery.isEnd"}},[t("el-option",{attrs:{label:"是",value:1}}),e._v(" "),t("el-option",{attrs:{label:"否",value:0}})],1)],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"创建时间"}},[t("el-date-picker",{attrs:{clearable:"",size:"small",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.getList},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.getList}},[e._v("搜索")]),e._v(" "),"all"===e.genre?t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.exportList}},[e._v("导出时间明细")]):e._e()],1)],1)},r=[],i=s("b150"),n=s("ed08"),l=s("edd9"),o={name:"WorkOrderSearch",props:["genre"],data:function(){return{processValueList:[],loading:!1,timeValue:"",listQuery:{},UserOptions:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},created:function(){this.getProcessList()},methods:{getList:function(){null===this.timeValue||void 0===this.timeValue||""===this.timeValue?(this.listQuery.startTime="",this.listQuery.endTime=""):(this.listQuery.startTime=Object(n["e"])(this.timeValue[0]),this.listQuery.endTime=Object(n["e"])(this.timeValue[1])),this.$emit("handleSearch",this.listQuery)},exportList:function(){null===this.timeValue||void 0===this.timeValue||""===this.timeValue?(this.listQuery.startTime="",this.listQuery.endTime=""):(this.listQuery.startTime=Object(n["e"])(this.timeValue[0]),this.listQuery.endTime=Object(n["e"])(this.timeValue[1])),this.$emit("handleExport",this.listQuery)},remoteUserList:function(e){var t=this;Object(i["i"])({pageSize:999999,nickName:e}).then((function(e){t.UserOptions=e.data.list}))},getProcessList:function(){var e=this;Object(l["f"])({per_page:999999}).then((function(t){e.processValueList=t.data.data}))}}},c=o,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,"732b427e",null);t["default"]=d.exports},"26fc":function(e,t,s){e.exports=s.p+"static/web/img/404_cloud.0f4bc32b.png"},"2a33":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("服务器信息")])]),e._v(" "),t("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[t("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[t("thead",[t("tr",[t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("属性")])]),e._v(" "),t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("值")])])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("服务器架构")])]),e._v(" "),t("td",[e.server.os?t("div",{staticClass:"cell"},[e._v(e._s(e.server.os.arch))]):e._e()])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("操作系统")])]),e._v(" "),t("td",[e.server.os?t("div",{staticClass:"cell"},[e._v(e._s(e.server.os.goOs))]):e._e()])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("核心数")])]),e._v(" "),t("td",[e.server.cpu?t("div",{staticClass:"cell"},[e._v(e._s(e.server.cpu.cpuNum))]):e._e()])])])])])])],1),e._v(" "),t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("内存")])]),e._v(" "),t("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[t("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[t("thead",[t("tr",[t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("属性")])]),e._v(" "),t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("值")])])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("总内存")])]),e._v(" "),t("td",[e.server.mem?t("div",{staticClass:"cell"},[e._v(e._s(e.server.mem.total)+"G")]):e._e()])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("已用内存")])]),e._v(" "),t("td",[e.server.mem?t("div",{staticClass:"cell"},[e._v(e._s(e.server.mem.used)+"G")]):e._e()])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("使用率")])]),e._v(" "),t("td",[e.server.mem?t("div",{staticClass:"cell",class:{"text-danger":e.server.mem.usage>80}},[e._v(e._s(e.server.mem.usage)+"%")]):e._e()])])])])])])],1),e._v(" "),t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("go运行环境")])]),e._v(" "),t("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[t("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[t("thead",[t("tr",[t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("属性")])]),e._v(" "),t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("值")])])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("go version")])]),e._v(" "),t("td",[e.server.os?t("div",{staticClass:"cell"},[e._v(e._s(e.server.os.version))]):e._e()])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("Goroutine")])]),e._v(" "),t("td",[e.server.os?t("div",{staticClass:"cell"},[e._v(e._s(e.server.os.numGoroutine))]):e._e()])])])])])])],1),e._v(" "),t("el-col",{staticClass:"card-box",attrs:{span:12}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("磁盘状态")])]),e._v(" "),t("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[t("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0"}},[t("thead",[t("tr",[t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("属性")])]),e._v(" "),t("th",{staticClass:"is-leaf"},[t("div",{staticClass:"cell"},[e._v("值")])])])]),e._v(" "),e.server.disk?t("tbody",[t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("总共")])]),e._v(" "),t("td",[t("div",{staticClass:"cell"},[e._v(e._s(e.server.disk.total))])])]),e._v(" "),t("tr",[t("td",[t("div",{staticClass:"cell"},[e._v("可用")])]),e._v(" "),t("td",[t("div",{staticClass:"cell"},[e._v(e._s(e.server.disk.free))])])])]):e._e()])])])],1)],1)],1)},r=[],i=s("b775");function n(){return Object(i["a"])({url:"/api/v1/monitor/server",method:"get"})}var l={name:"Server",data:function(){return{loading:[],server:[]}},created:function(){this.getList(),this.openLoading()},methods:{getList:function(){var e=this;n().then((function(t){e.server=t,e.loading.close()}))},openLoading:function(){this.loading=this.$loading({lock:!0,text:"拼命读取中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}}},o=l,c=s("2877"),u=Object(c["a"])(o,a,r,!1,null,null,null);t["default"]=u.exports},"2ac3":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"f",(function(){return i})),s.d(t,"e",(function(){return n})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/tpl",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/v1/tpl",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/v1/tpl/details",method:"get",params:e})}function l(e){return Object(a["a"])({url:"/api/v1/tpl",method:"put",data:e})}function o(e){return Object(a["a"])({url:"/api/v1/tpl",method:"delete",params:e})}function c(e){return Object(a["a"])({url:"/api/v1/tpl/clone/".concat(e),method:"post"})}},"2ba7":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[t("el-form-item",{attrs:{label:"登录地址"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入登录地址",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.ipaddr,callback:function(t){e.$set(e.queryParams,"ipaddr",t)},expression:"queryParams.ipaddr"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.username,callback:function(t){e.$set(e.queryParams,"username",t)},expression:"queryParams.username"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysloginlog:remove"],expression:"['system:sysloginlog:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysloginlog:clean"],expression:"['system:sysloginlog:clean']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.handleClean}},[e._v("清空")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysloginlog:export"],expression:"['system:sysloginlog:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.list},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"编号",width:"100",align:"center",prop:"infoId"}}),e._v(" "),t("el-table-column",{attrs:{label:"用户名称",width:"150",align:"center",prop:"username"}}),e._v(" "),t("el-table-column",{attrs:{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"登录地点",align:"center",prop:"loginLocation"}}),e._v(" "),t("el-table-column",{attrs:{label:"浏览器",align:"center",prop:"browser"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作系统",align:"center",prop:"os"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作信息",width:"120",align:"center",prop:"msg"}}),e._v(" "),t("el-table-column",{attrs:{label:"登录日期",align:"center",prop:"loginTime",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.loginTime)))])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)},r=[],i=s("b775");function n(e){return Object(i["a"])({url:"/api/v1/loginloglist",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/api/v1/loginlog/"+e,method:"delete"})}function o(){return Object(i["a"])({url:"/api/v1/loginlog",method:"delete"})}var c=s("ed08"),u={name:"Logininfor",data:function(){return{loading:!0,ids:[],multiple:!0,total:0,list:[],dateRange:[],queryParams:{pageIndex:1,pageSize:10,ipaddr:void 0,username:void 0,status:void 0}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,n(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.list=t.data.list,e.total=t.data.count,e.loading=!1}))},handleQuery:function(){this.queryParams.pageIndex=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.infoId})),this.multiple=!e.length},handleDelete:function(e){var t=this,s=e.infoId||this.ids;this.$confirm('是否确认删除访问编号为"'+s+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(s)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleClean:function(){var e=this;this.$confirm("是否确认清空所有登录日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return o()})).then((function(t){200===t.code&&(e.getList(),e.msgSuccess("清空成功"))})).catch((function(){}))},handleExport:function(){var e=this;this.$confirm("是否确认导出所有操作日志数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.downloadLoading=!0,Promise.all([s.e("chunk-23b9c8dc"),s.e("chunk-748b566e")]).then(s.bind(null,"4bf8d")).then((function(t){var s=["编号","用户名称","登陆地址","登陆地点","浏览器","操作系统","登陆状态","操作信息","登陆日期"],a=["infoId","username","ipaddr","loginLocation","browser","os","status","msg","loginTime"],r=e.list,i=Object(c["c"])(a,r);t.export_json_to_excel({header:s,data:i,filename:"登陆日志",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1}))}))}}},d=u,p=s("2877"),m=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},"2dde":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[t("el-input",{model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{attrs:{maxlength:"11"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[t("el-radio",{attrs:{label:"0"}},[e._v("男")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("女")])],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},r=[],i=s("b150"),n={props:{user:{type:Object}},data:function(){return{rules:{nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&Object(i["k"])(e.user).then((function(t){200===t.code?e.msgSuccess("修改成功"):e.msgError(t.msg)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/dashboard"})}}},l=n,o=s("2877"),c=Object(o["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},3:function(e,t){},3823:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[t("el-input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword",t)},expression:"user.oldPassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[t("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword",t)},expression:"user.newPassword"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"/* margin-bottom":"10px */"},attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{placeholder:"请确认密码",type:"password"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},r=[],i=s("b150"),n={data:function(){var e=this,t=function(t,s,a){e.user.newPassword!==s?a(new Error("两次输入的密码不一致")):a()};return{passwordTyleStatus:!0,user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0,passwordType:1},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&(e.passwordTyleStatus||(e.user.passwordType=0),e.user.passwordType=0,Object(i["l"])(e.user.oldPassword,e.user.newPassword,e.user.passwordType).then((function(t){200===t.code?e.msgSuccess("修改成功"):e.msgError(t.msg)})))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},l=n,o=s("2877"),c=Object(o["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},"38f1":function(e,t,s){},"3c30":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("WorkOrderSearch",{attrs:{genre:"upcoming"},on:{handleSearch:e.handleSearch}})],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.ticketList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"流程",prop:"process_name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v("\n            "+e._s(s.row.state_name)+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前处理人","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("span",[e._v(e._s(s.row.principals))]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级","show-overflow-tooltip":!0,width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2===s.row.priority?t("span",[t("el-tag",{attrs:{type:"warning"}},[e._v("紧急")])],1):3===s.row.priority?t("span",[t("el-tag",{attrs:{type:"danger"}},[e._v("非常紧急")])],1):t("span",[t("el-tag",{attrs:{type:"success"}},[e._v("一般")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否结束","show-overflow-tooltip":!0,width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("否")]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("是")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:upcoming:select"],expression:"['process:list:upcoming:select']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleView(s.row)}}},[e._v("查看")]),e._v(" "),0===s.row.is_end?t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:upcoming:inversion"],expression:"['process:list:upcoming:inversion']"}],attrs:{size:"mini",type:"text",icon:"el-icon-position"},on:{click:function(t){return e.handleInversion(s.row)}}},[e._v("转交")]):e._e()]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"转交工单",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"节点",prop:"node_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择节点",size:"small"},model:{value:e.ruleForm.node_id,callback:function(t){e.$set(e.ruleForm,"node_id",t)},expression:"ruleForm.node_id"}},e._l(e.nodeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.label,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"用户",prop:"user_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"选择用户",size:"small"},model:{value:e.ruleForm.user_id,callback:function(t){e.$set(e.ruleForm,"user_id",t)},expression:"ruleForm.user_id"}},e._l(e.users,(function(e,s){return t("el-option",{key:s,attrs:{label:e.nickName,value:e.userId}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)},r=[],i=s("6da4"),n=s("b150"),l=s("26d5"),o={components:{WorkOrderSearch:l["default"]},data:function(){return{users:[],nodeList:[],dialogVisible:!1,queryParams:{},total:0,loading:!1,ticketList:[],listQuery:{page:1,per_page:10},ruleForm:{work_order_id:"",node_id:"",user_id:"",remarks:""},rules:{node_id:[{required:!0,message:"请选择节点",trigger:"change"}],user_id:[{required:!0,message:"请选择用户",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,this.listQuery.classify=1,Object(i["l"])(this.listQuery).then((function(t){e.ticketList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleSearch:function(e){for(var t in e)this.listQuery[t]=e[t];this.getList()},handleView:function(e){this.$router.push({name:"ProcessListHandle",query:{workOrderId:e.id,processId:e.process}})},handleInversion:function(e){var t=this;this.dialogVisible=!0,this.ruleForm.work_order_id=e.id,this.nodeList=e.state,1===this.nodeList.length&&(this.ruleForm.node_id=this.nodeList[0].id),Object(n["i"])({pageSize:999999}).then((function(e){t.users=e.data.list}))},handleSelectionChange:function(){},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(i["f"])(t.ruleForm).then((function(e){200===e.code&&(t.getList(),t.dialogVisible=!1)}))}))}}},c=o,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,"47a6caf2",null);t["default"]=d.exports},"3c50":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("WorkOrderSearch",{attrs:{genre:"my-create"},on:{handleSearch:e.handleSearch}})],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.ticketList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"流程",prop:"process_name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v("\n            "+e._s(s.row.state_name)+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前处理人","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("span",[e._v(e._s(s.row.principals))]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级","show-overflow-tooltip":!0,width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2===s.row.priority?t("span",[t("el-tag",{attrs:{type:"warning"}},[e._v("紧急")])],1):3===s.row.priority?t("span",[t("el-tag",{attrs:{type:"danger"}},[e._v("非常紧急")])],1):t("span",[t("el-tag",{attrs:{type:"success"}},[e._v("一般")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否结束","show-overflow-tooltip":!0,width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("否")]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("是")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:myCreate:select"],expression:"['process:list:myCreate:select']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleView(s.row)}}},[e._v("查看")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:myCreate:reopen"],expression:"['process:list:myCreate:reopen']"}],attrs:{size:"mini",type:"text",icon:"el-icon-refresh-right"},on:{click:function(t){return e.handleReopen(s.row.id)}}},[e._v("重开")]),e._v(" "),0===s.row.is_end?t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:upcoming:urge"],expression:"['process:list:upcoming:urge']"}],attrs:{size:"mini",type:"text",icon:"el-icon-alarm-clock"},on:{click:function(t){return e.handleUrge(s.row)}}},[e._v("催办")]):e._e()]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)},r=[],i=s("6da4"),n=s("26d5"),l={components:{WorkOrderSearch:n["default"]},data:function(){return{users:[],nodeList:[],queryParams:{},total:0,loading:!1,ticketList:[],listQuery:{page:1,per_page:10},ruleForm:{work_order_id:"",node_id:"",user_id:"",remarks:""},rules:{node_id:[{required:!0,message:"请选择节点",trigger:"change"}],user_id:[{required:!0,message:"请选择用户",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,this.listQuery.classify=2,Object(i["l"])(this.listQuery).then((function(t){e.ticketList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleSearch:function(e){for(var t in e)this.listQuery[t]=e[t];this.getList()},handleView:function(e){this.$router.push({name:"ProcessListHandle",query:{workOrderId:e.id,processId:e.process}})},handleReopen:function(e){var t=this;this.$confirm("根据此工单新建一个新的工单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){Object(i["h"])(e).then((function(e){t.getList(),t.$message({type:"success",message:"成功!"})}))}))},handleSelectionChange:function(){},handleUrge:function(e){var t=this;this.$confirm('<span style="font-size:15px ">对此工单处理人进行催办通知提醒, 是否继续?</span><br><span style="color: #c33; font-size: 10px">注意：十分钟内只能催办一次。</span>',"催办",{dangerouslyUseHTMLString:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["k"])({workOrderId:e.id}).then((function(e){t.$message({type:"success",message:"已进行催办通知!"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},o=l,c=s("2877"),u=Object(c["a"])(o,a,r,!1,null,"651f7569",null);t["default"]=u.exports},"3f2c":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-editor-container"},[t("el-row",{attrs:{gutter:12}},[t("el-col",{style:{marginBottom:"12px"},attrs:{sm:32,xs:32,md:8,xl:8,lg:8}},[t("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我创建的",total:e.dashboardValue.count.my_create},nativeOn:{click:function(t){return e.toTicketList("/process/my-create")}}},[t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline"})])],1)],1),e._v(" "),t("el-col",{style:{marginBottom:"12px"},attrs:{sm:32,xs:32,md:8,xl:8,lg:8}},[t("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我相关的",total:e.dashboardValue.count.related},nativeOn:{click:function(t){return e.toTicketList("/process/related")}}},[t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline"})])],1)],1),e._v(" "),t("el-col",{style:{marginBottom:"12px"},attrs:{sm:32,xs:32,md:8,xl:8,lg:8}},[t("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我的待办",total:e.dashboardValue.count.upcoming},nativeOn:{click:function(t){return e.toTicketList("/process/upcoming")}}},[t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline"})])],1)],1)],1)],1)},r=[],i=s("90c0"),n=s("b775");function l(e){return Object(n["a"])({url:"/api/v1/dashboard",method:"get",params:e})}var o={name:"DashboardAdmin",components:{ChartCard:i["default"]},data:function(){return{dashboardValue:{count:{}},rankList:[],submitData:[],querys:"",queryList:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-6048e5),e.$emit("pick",[s,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-2592e6),e.$emit("pick",[s,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,s=new Date;s.setTime(s.getTime()-7776e6),e.$emit("pick",[s,t])}}]}}},created:function(){this.getInitData()},methods:{getInitData:function(){var e=this;l(this.queryList).then((function(t){e.dashboardValue=t.data}))},timeScreening:function(){this.querys.length>1&&(this.queryList.start_time=this.querys[0],this.queryList.end_time=this.querys[1],this.getInitData())},toTicketList:function(e){this.$router.push({path:e})}}},c=o,u=(s("cb82"),s("2877")),d=Object(u["a"])(c,a,r,!1,null,"c0411ae4",null);t["default"]=d.exports},"40d1":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return n})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return o}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/task",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/v1/task",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/v1/task",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/api/v1/task",method:"delete",params:e})}function o(e){return Object(a["a"])({url:"/api/v1/task/details",method:"get",params:e})}},"41f3":function(e,t,s){"use strict";s("ae70")},"45e1":function(e,t,s){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"73332","./en-il.js":"73332","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=i(e);return s(t)}function i(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="4678"},4792:function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form-item",{attrs:{label:"模版名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入模版名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:template:add"],expression:"['process:admin:template:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleCreate}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.tplList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",prop:"name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"创建者",prop:"create_name","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"update_time",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row;return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:template:clone"],expression:"['process:admin:template:clone']"}],attrs:{size:"mini",type:"text",icon:"el-icon-receiving"},on:{click:function(t){return e.handleClone(a)}}},[e._v("克隆")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:template:edit"],expression:"['process:admin:template:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:template:delete"],expression:"['process:admin:template:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"0"},attrs:{title:1===e.dialogFormVisibleName?"新建模版":"编辑模版",visible:e.open,fullscreen:!0},on:{"update:visible":function(t){e.open=t}}},[t("div",{staticClass:"tpl-create-content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"模版",prop:"form_structure"}},[t("div",{staticStyle:{"border-radius":"4px",border:"1px solid #ccc",overflow:"hidden"}},[t("fm-making-form",{ref:"makingform",staticStyle:{height:"600px"},attrs:{preview:"",clearable:"",upload:"","generate-code":"","generate-json":"","advance-fields":["editor","imgupload","file","subform","cascader"]}},[t("template",{slot:"action"})],2)],1)])],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){1===e.dialogFormVisibleName?e.submitForm("ruleForm"):e.editForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)])],1)],1)},r=[],i=s("2b0e"),n=s("2ac3"),l=s("2ced"),o=(s("0379"),s("6d4f")),c=s.n(o);s("65d8");i["default"].use(c.a),i["default"].use(l["a"]),i["default"].use(l["b"]);var u={name:"Template",data:function(){return{dialogFormVisibleName:1,queryParams:{pageIndex:1,pageSize:10},loading:!0,ids:[],single:!0,multiple:!0,total:0,open:!1,tplList:[],listQuery:{page:1,per_page:10},ruleForm:{id:void 0,name:"",remarks:"",form_structure:""},rules:{name:[{required:!0,message:"请输入模版名称",trigger:"blur"}],form_structure:[{required:!0,message:"请设计模版",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,Object(n["f"])(this.listQuery).then((function(t){e.tplList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleCreate:function(){var e=this;this.ruleForm={id:void 0,name:"",remarks:"",form_structure:""},this.dialogFormVisibleName=1,this.open=!0,this.$nextTick((function(){e.$refs.makingform.handleClear()}))},handleEdit:function(e){var t=this;this.dialogFormVisibleName=2,Object(n["e"])({template_id:e.id}).then((function(e){t.ruleForm={id:e.data.id,name:e.data.name,remarks:e.data.remarks,form_structure:e.data.remarks},t.open=!0,t.$nextTick((function(){t.$refs.makingform.setJSON(e.data.form_structure)}))}))},submitForm:function(e){var t=this;this.handleSave(this.$refs.makingform.getJSON()),this.$refs[e].validate((function(e){e&&Object(n["b"])(t.ruleForm).then((function(){t.getList(),t.open=!1}))}))},editForm:function(e){var t=this;this.handleSave(this.$refs.makingform.getJSON()),this.$refs[e].validate((function(e){e&&Object(n["d"])(t.ruleForm).then((function(){t.getList(),t.open=!1}))}))},handleQuery:function(){this.queryParams.pageIndex=1,this.queryParams.pageSize=10,this.getList()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["c"])({templateId:e.id}).then((function(e){void 0!==e&&(t.getList(),t.$message({type:"success",message:"模版已删除!"}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(){},handleSave:function(e){e.list.length>0?this.ruleForm.form_structure=e:this.ruleForm.form_structure=""},handleClone:function(e){var t=this;this.$confirm("确认克隆模版 < ".concat(e.name," > ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){Object(n["a"])(e.id).then((function(){t.getList(),t.$message({type:"success",message:"模版已克隆!"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},d=u,p=s("2877"),m=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},"50ce":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block"}},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0"}},[e._v("Filename: ")]),e._v(" "),t("el-input",{staticStyle:{width:"345px"},attrs:{placeholder:"Please enter the file name (default excel-list)","prefix-icon":"el-icon-document"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)},r=[],i={props:{value:{type:String,default:""}},computed:{filename:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},"529e":function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form-item",{attrs:{label:"流程名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入流程名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:manager:add"],expression:"['process:admin:manager:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleCreate}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.processValueList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",prop:"name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"创建者",prop:"create_name","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"update_time",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:manager:clone"],expression:"['process:admin:manager:clone']"}],attrs:{size:"mini",type:"text",icon:"el-icon-receiving"},on:{click:function(t){return e.handleClone(s.row)}}},[e._v("克隆")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:manager:edit"],expression:"['process:admin:manager:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:manager:delete"],expression:"['process:admin:manager:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{staticStyle:{"margin-top":"0"},attrs:{title:1===e.dialogProcessVisibleName?"新建流程":"编辑流程",visible:e.open,fullscreen:!0},on:{"update:visible":function(t){e.open=t}}},[t("div",{staticClass:"tpl-create-content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入流程名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t("e-icon-picker",{staticStyle:{width:"100%"},model:{value:e.ruleForm.icon,callback:function(t){e.$set(e.ruleForm,"icon",t)},expression:"ruleForm.icon"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"分类",prop:"classify"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择流程分类"},model:{value:e.ruleForm.classify,callback:function(t){e.$set(e.ruleForm,"classify",t)},expression:"ruleForm.classify"}},e._l(e.classifyListData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"模版",prop:"tpls"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择模版"},model:{value:e.ruleForm.tpls,callback:function(t){e.$set(e.ruleForm,"tpls",t)},expression:"ruleForm.tpls"}},e._l(e.templates,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"通知"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",clearable:"",placeholder:"请选择流程任务"},model:{value:e.ruleForm.notice,callback:function(t){e.$set(e.ruleForm,"notice",t)},expression:"ruleForm.notice"}},[t("el-option",{attrs:{label:"邮件",value:1}})],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"任务"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",clearable:"",placeholder:"请选择流程任务"},model:{value:e.ruleForm.task,callback:function(t){e.$set(e.ruleForm,"task",t)},expression:"ruleForm.task"}},e._l(e.taskListData,(function(e,s){return t("el-option",{key:s,attrs:{label:e.name,value:e.full_name}})})),1)],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"描述",prop:"remarks"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入流程描述",type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"流程",prop:"structure"}},[t("div",{staticStyle:{"border-radius":"4px",overflow:"hidden"}},[t("div",[e.wfdDesignRefresh?t("WfdDesign",{ref:"wfd",attrs:{users:e.users,roles:e.roles,departments:e.departments,tasks:e.taskListData,templates:e.ruleForm.tpls,"templates-base":e.templates,data:e.ruleForm.structure,height:600,lang:e.lang,"template-infos":e.templates,"field-infos":e.fieldInfos}}):e._e()],1)])])],1),e._v(" "),t("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){1===e.dialogProcessVisibleName?e.submitForm("ruleForm"):e.editForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)])],1)],1)},r=[],i=(s("55dd"),s("2d63")),n=s("edd9"),l=s("5f1e"),o=s("2ac3"),c=s("40d1"),u=s("b150"),d=s("3528"),p=s("fcb7"),m={name:"Process",components:{WfdDesign:function(){return Promise.all([s.e("chunk-b44a81f4"),s.e("chunk-0f6c8c63")]).then(s.bind(null,"bd84"))}},data:function(){return{queryParams:{pageIndex:1,pageSize:10},loading:!0,ids:[],single:!0,multiple:!0,total:0,open:!1,structureValue:[],users:[],roles:[],groups:[],departments:[],templates:[],templateInfos:[],fieldInfos:[],taskListData:[],wfdDesignRefresh:!0,classifyListData:[],dialogProcessVisibleName:1,processValueList:[],listQuery:{page:1,per_page:10},lang:"zh",ruleForm:{},rules:{icon:[{required:!0,message:"请输入流程图标",trigger:"blur"}],name:[{required:!0,message:"请输入流程名称",trigger:"blur"}],classify:[{required:!0,message:"请选择流程分类",trigger:"blur, change"}],tpls:[{required:!0,message:"请选择模版",trigger:"blur, change"}],structure:[{required:!0,message:"请设计流程",trigger:"blur"}],remarks:[{required:!0,message:"请输入流程描述",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getTaskList:function(){var e=this;Object(c["d"])({page:1,per_page:99999}).then((function(t){e.taskListData=t.data.data}))},getClassifyList:function(){var e=this;Object(l["a"])({page:1,per_page:99999}).then((function(t){e.classifyListData=t.data.data}))},getTemplates:function(){var e=this;Object(o["f"])({page:1,per_page:99999}).then((function(t){e.templates=t.data.data,console.log("pm get templates"),console.log(JSON.stringify(e.templates))}))},getUsers:function(){var e=this;Object(u["i"])({pageSize:999999}).then((function(t){e.users=t.data.list}))},getRoles:function(){var e=this;Object(d["g"])({pageSize:999999}).then((function(t){e.roles=t.data.list}))},getDepartments:function(){var e=this;Object(p["e"])().then((function(t){e.departments=t.data}))},getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,Object(n["f"])(this.listQuery).then((function(t){e.processValueList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},getProcessInitData:function(){this.getClassifyList(),this.getTemplates(),this.getUsers(),this.getRoles(),this.getDepartments(),this.getTaskList()},handleCreate:function(){var e=this;this.getProcessInitData(),this.ruleForm={id:void 0,name:"",tpls:[],structure:{edges:[],nodes:[],groups:[]},classify:"",task:[],notice:[1],icon:"",remarks:""},this.dialogProcessVisibleName=1,this.open=!0,this.wfdDesignRefresh=!1,this.$nextTick((function(){e.wfdDesignRefresh=!0}))},handleEdit:function(e){var t=this;this.dialogProcessVisibleName=2,this.getProcessInitData(),this.wfdDesignRefresh=!1,this.open=!0,Object(n["e"])({processId:e.id}).then((function(e){t.ruleForm={id:e.data.id,name:e.data.name,tpls:e.data.tpls,structure:e.data.structure,classify:e.data.classify,task:e.data.task,notice:e.data.notice,icon:e.data.icon,remarks:e.data.remarks},t.wfdDesignRefresh=!1,t.$nextTick((function(){t.wfdDesignRefresh=!0}))}))},verifyProcess:function(e){var t,s=Object(i["a"])(e.nodes);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(void 0===a.sort||null===a.sort||""===a.sort)return"流程节点顺序不能为空";if(void 0===a.label||null===a.label||""===a.label)return"流程节点标题不能为空";if("userTask"===a.clazz||"receiveTask"===a.clazz){if(void 0===a.assignType||null===a.assignType||""===a.assignType)return"审批节点或处理节点的处理人类型不能为空";if(void 0===a.assignValue||null===a.assignValue||""===a.assignValue||0===a.assignValue.length)return"审批节点或处理节点的处理人不能为空"}}}catch(o){s.e(o)}finally{s.f()}var r,n=Object(i["a"])(e.edges);try{for(n.s();!(r=n.n()).done;){var l=r.value;if(void 0===l.sort||null===l.sort||""===l.sort)return"流转顺序不能为空";if(void 0===l.label||null===l.label||""===l.label)return"流转标题不能为空";if(void 0===l.flowProperties||null===l.flowProperties||""===l.flowProperties)return"流转属性不能为空"}}catch(o){n.e(o)}finally{n.f()}return""},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=t.$refs.wfd.graph.save(),a=t.verifyProcess(s);if(""!==a)return void t.$message.error(a);s.nodes.length>0&&s.edges.length>0?(t.ruleForm.structure=s,Object(n["c"])(t.ruleForm).then((function(e){t.getList(),t.open=!1}))):t.$message.error("没有流程数据，请完善流程")}}))},editForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=t.$refs.wfd.graph.save(),a=t.verifyProcess(s);if(""!==a)return void t.$message.error(a);s.nodes.length>0&&s.edges.length>0?Object(n["g"])({id:t.ruleForm.id,name:t.ruleForm.name,tpls:t.ruleForm.tpls,structure:s,classify:t.ruleForm.classify,task:t.ruleForm.task,notice:t.ruleForm.notice,icon:t.ruleForm.icon,remarks:t.ruleForm.remarks}).then((function(e){t.getList(),t.open=!1})):t.$notify({title:"错误",message:"没有流程数据，请完善流程",type:"error"})}}))},handleQuery:function(){this.queryParams.pageIndex=1,this.queryParams.pageSize=10,this.getList()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["d"])({processId:e.id}).then((function(e){void 0!==e&&(t.getList(),t.$message({type:"success",message:"流程已删除!"}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(){},handleSave:function(e){e.list.length>0?this.ruleForm.form_structure=e:this.ruleForm.form_structure=""},handleClone:function(e){var t=this;this.$confirm("确认克隆流程 < ".concat(e.name," > ?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){Object(n["b"])(e.id).then((function(){t.getList(),t.$message({type:"success",message:"流程已克隆!"})}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))}}},f=m,v=s("2877"),h=Object(v["a"])(f,a,r,!1,null,null,null);t["default"]=h.exports},"54f4":function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("配置信息")])]),e._v(" "),t("div",{staticClass:"text item"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"系统名称：",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"系统Logo：",prop:"logo"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.url,data:{type:"1"},"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.logo?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.logo}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码："}},[t("el-radio",{attrs:{label:!0},model:{value:e.ruleForm.is_verify_code,callback:function(t){e.$set(e.ruleForm,"is_verify_code",t)},expression:"ruleForm.is_verify_code"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1},model:{value:e.ruleForm.is_verify_code,callback:function(t){e.$set(e.ruleForm,"is_verify_code",t)},expression:"ruleForm.is_verify_code"}},[e._v("否")])],1),e._v(" "),t("el-form-item",{attrs:{label:"LDAP登陆："}},[t("el-radio",{attrs:{label:!0},model:{value:e.ruleForm.is_ldap,callback:function(t){e.$set(e.ruleForm,"is_ldap",t)},expression:"ruleForm.is_ldap"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:!1},model:{value:e.ruleForm.is_ldap,callback:function(t){e.$set(e.ruleForm,"is_ldap",t)},expression:"ruleForm.is_ldap"}},[e._v("否")])],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-bottom":"0"}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:settings:index:config"],expression:"['system:settings:index:config']"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm",1)}}},[e._v("确定")])],1)],1)],1)]),e._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("Ldap配置")])]),e._v(" "),t("div",{staticClass:"text item"},[t("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"Ldap登陆验证通过后，会将用户同步至本地数据库中，请在此配置数据同步的映射关系。单击Ldap字段可编辑，双击可隐藏编辑。",type:"info"}}),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"local_field_name",label:"字段名称",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"local_field_nick",label:"字段昵称",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ldap_field_name",label:"Ldap字段"},scopedSlots:e._u([{key:"default",fn:function(s){var a=s.row,r=s.$index;return[t("div",{staticStyle:{width:"100%","min-height":"24px"},on:{click:function(t){e.chengenum(r,!0)},dblclick:function(t){e.chengenum(r,!1)}}},[e.editable[r]?t("el-input",{model:{value:a.ldap_field_name,callback:function(t){e.$set(a,"ldap_field_name",t)},expression:"row.ldap_field_name"}}):t("span",[e._v(e._s(a.ldap_field_name))])],1)]}}])})],1),e._v(" "),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:settings:index:ldap"],expression:"['system:settings:index:ldap']"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm",2)}}},[e._v("确定")])],1)],1)])],1)},r=[],i=s("2d63"),n=s("79b8"),l={components:{},data:function(){return{url:"http://10.140.96.47:8002/api/v1/public/uploadFile",editable:[],ruleForm:{name:"",logo:"",is_ldap:!1,is_verify_code:!0},rules:{name:[{required:!0,message:"请输入系统名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],logo:[{required:!0,message:"请设置Logo",trigger:"blur"}]},tableData:[]}},created:function(){this.getSettingsInfo()},methods:{getSettingsInfo:function(){var e=this;Object(n["a"])().then((function(t){var s,a=Object(i["a"])(t.data);try{for(a.s();!(s=a.n()).done;){var r=s.value;1===r.classify?void 0===r.content||null===r.content?e.ruleForm={name:"",logo:"",is_ldap:!1}:(void 0!==r.content.is_ldap&&null!==r.content.is_ldap||(r.content.is_ldap=!1),e.ruleForm=r.content):2===r.classify&&(void 0===r.content||null===r.content?e.tableData=[]:e.tableData=r.content)}}catch(n){a.e(n)}finally{a.f()}}))},submitForm:function(e,t){var s=this,a=!1,r={classify:t};1===t?this.$refs[e].validate((function(e){e&&(r.content=s.ruleForm,a=!0)})):2===t&&(r.content=this.tableData,a=!0),a&&Object(n["b"])(r).then((function(e){s.$store.dispatch("settings/getSystemSettings"),s.$message({message:"设置成功",type:"success"})}))},resetForm:function(e){this.$refs[e].resetFields()},handleAvatarSuccess:function(e,t){this.ruleForm.logo=e.data},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},chengenum:function(e,t){this.editable[e]=t,this.$set(this.editable,e,t)}}},o=l,c=(s("41f3"),s("2877")),u=Object(c["a"])(o,a,r,!1,null,null,null);t["default"]=u.exports},5788:function(e,t,s){"use strict";s.r(t);s("55dd");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[t("el-form-item",{attrs:{label:"岗位编码",prop:"postCode"}},[t("el-input",{attrs:{placeholder:"请输入岗位编码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.postCode,callback:function(t){e.$set(e.queryParams,"postCode",t)},expression:"queryParams.postCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[t("el-input",{attrs:{placeholder:"请输入岗位名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.postName,callback:function(t){e.$set(e.queryParams,"postName",t)},expression:"queryParams.postName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:add"],expression:"['system:syspost:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:edit"],expression:"['system:syspost:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("编辑")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:remove"],expression:"['system:syspost:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:export"],expression:"['system:syspost:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.postList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"岗位编号",width:"80",align:"center",prop:"postId"}}),e._v(" "),t("el-table-column",{attrs:{label:"岗位编码",align:"center",prop:"postCode"}}),e._v(" "),t("el-table-column",{attrs:{label:"岗位名称",align:"center",prop:"postName"}}),e._v(" "),t("el-table-column",{attrs:{label:"岗位排序",align:"center",prop:"sort"}}),e._v(" "),t("el-table-column",{attrs:{label:"状态",align:"center",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tag",{attrs:{type:"1"===s.row.status?"danger":"success","disable-transitions":""}},[e._v(e._s("1"===s.row.status?"停用":"正常"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:edit"],expression:"['system:syspost:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:syspost:remove"],expression:"['system:syspost:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px"},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"岗位名称",prop:"postName"}},[t("el-input",{attrs:{placeholder:"请输入岗位名称"},model:{value:e.form.postName,callback:function(t){e.$set(e.form,"postName",t)},expression:"form.postName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"岗位编码",prop:"postCode"}},[t("el-input",{attrs:{placeholder:"请输入编码名称"},model:{value:e.form.postCode,callback:function(t){e.$set(e.form,"postCode",t)},expression:"form.postCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"岗位顺序",prop:"sort"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("b775");function n(e){return Object(i["a"])({url:"/api/v1/postlist",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/api/v1/post/"+e,method:"get"})}function o(e){return Object(i["a"])({url:"/api/v1/post",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/api/v1/post",method:"put",data:e})}function u(e){return Object(i["a"])({url:"/api/v1/post/"+e,method:"delete"})}var d=s("ed08"),p={name:"Post",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,total:0,postList:[],title:"",open:!1,queryParams:{pageIndex:1,pageSize:10,postCode:void 0,postName:void 0,status:void 0},form:{},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],sort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,n(this.queryParams).then((function(t){e.postList=t.data.list,e.total=t.data.count,e.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={postId:void 0,postCode:void 0,postName:void 0,sort:0,status:"0",remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageIndex=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.postId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.open=!0,this.title="添加岗位"},handleUpdate:function(e){var t=this;this.reset();var s=e.postId||this.ids;l(s).then((function(e){t.form=e.data,t.open=!0,t.title="修改岗位"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.postId?c(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):o(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))}))},handleDelete:function(e){var t=this,s=e.postId||this.ids;this.$confirm('是否确认删除岗位编号为"'+s+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return u(s)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this;this.$confirm("是否确认导出所有岗位数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.downloadLoading=!0,Promise.all([s.e("chunk-23b9c8dc"),s.e("chunk-748b566e")]).then(s.bind(null,"4bf8d")).then((function(t){var s=["岗位编号","岗位编码","岗位名称","排序","创建时间"],a=["postId","postCode","postName","sort","create_time"],r=e.postList,i=Object(d["c"])(a,r);t.export_json_to_excel({header:s,data:i,filename:"岗位管理",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1}))})).catch((function(){}))}}},m=p,f=s("2877"),v=Object(f["a"])(m,a,r,!1,null,null,null);t["default"]=v.exports},5790:function(e,t,s){},"5cfa":function(e,t,s){"use strict";s.r(t);s("55dd");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"部门名称"}},[t("el-input",{attrs:{placeholder:"请输入部门名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.deptName,callback:function(t){e.$set(e.queryParams,"deptName",t)},expression:"queryParams.deptName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysdept:add"],expression:"['system:sysdept:add']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.deptList,"row-key":"deptId",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"deptName",label:"部门名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tag",{attrs:{type:"1"===s.row.status?"danger":"success","disable-transitions":""}},[e._v(e._s("1"===s.row.status?"停用":"正常"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysdept:edit"],expression:"['system:sysdept:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysdept:add"],expression:"['system:sysdept:add']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd(s.row)}}},[e._v("新增")]),e._v(" "),0!=s.row.p_id?t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysdept:remove"],expression:"['system:sysdept:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"600px"},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"上级部门",prop:"parentId"}},[t("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级部门","is-disabled":e.isEdit},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[t("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"显示排序",prop:"orderNum"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择负责人"},model:{value:e.form.leader,callback:function(t){e.$set(e.form,"leader",t)},expression:"form.leader"}},e._l(e.users,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.nickName,value:e.userId}})})),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入联系电话",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"部门状态"}},[t("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(s){return t("el-radio",{key:s.value,attrs:{label:s.value}},[e._v(e._s(s.label))])})),1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("b150"),n=s("fcb7"),l=s("ca17"),o=s.n(l),c=(s("542c"),{name:"Dept",components:{Treeselect:o.a},data:function(){return{loading:!0,deptList:[],deptOptions:[],title:"",isEdit:!1,open:!1,queryParams:{deptName:void 0,status:void 0},users:[],form:{},rules:{parentId:[{required:!0,message:"上级部门不能为空",trigger:"blur"}],deptName:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],leader:[{required:!0,message:"部门负责人不能为空",trigger:"blur"}],sort:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}],email:[{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]},statusOptions:[{label:"正常",value:"0"},{label:"停用",value:"1"}]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(n["d"])(this.queryParams).then((function(t){e.deptList=t.data,e.loading=!1}))},getUsers:function(){var e=this;Object(i["i"])({pageSize:999999}).then((function(t){e.users=t.data.list}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.deptId,label:e.deptName,children:e.children}},getTreeselect:function(e){var t=this;Object(n["d"])().then((function(s){if(t.deptOptions=[],"update"===e){var a={deptId:0,deptName:"主类目",children:[],isDisabled:!0};a.children=s.data,t.deptOptions.push(a)}else{var r={deptId:0,deptName:"主类目",children:[]};r.children=s.data,t.deptOptions.push(r)}}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={deptId:void 0,parentId:void 0,deptName:void 0,sorc:void 0,leader:void 0,phone:void 0,email:void 0,status:"0"}},handleQuery:function(){this.getList()},handleAdd:function(e){this.getUsers(),this.reset(),this.getTreeselect("add"),void 0!==e&&(this.form.parentId=e.deptId),this.open=!0,this.title="添加部门",this.isEdit=!1},handleUpdate:function(e){var t=this;this.getUsers(),this.reset(),this.getTreeselect("update"),Object(n["c"])(e.deptId).then((function(e){t.form=e.data,0===t.form.leader&&(t.form.leader=""),t.open=!0,t.title="修改部门",t.isEdit=!0}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.deptId?Object(n["h"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):Object(n["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.deptName+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(n["b"])(e.deptId)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}}),u=c,d=s("2877"),p=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},"5ed3":function(e,t,s){"use strict";s("b3b3")},"5f1e":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return l}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/classify",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/v1/classify",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/v1/classify",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/api/v1/classify",method:"delete",params:e})}},"690f":function(e,t,s){"use strict";s("38f1")},"6da4":function(e,t,s){"use strict";s("ac6a"),s("456d");var a=s("b775"),r=(s("a481"),s("3b2b"),s("bc3a")),i=s.n(r),n=s("5f87"),l={xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"},o="http://10.140.96.47:8002";function c(e,t){var s=o+e;i()({method:"get",url:s,responseType:"blob",headers:{Authorization:"Bearer "+Object(n["a"])()}}).then((function(e){u(e,l.zip,t)}))}function u(e,t,s){var a=document.createElement("a"),r=new Blob([e.data],{type:t}),i=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),n=decodeURI(e.headers["content-disposition"]);if(!s){var l=i.exec(n);s=l[1],s=s.replace(/\"/g,"")}a.href=URL.createObjectURL(r),a.setAttribute("download",s),document.body.appendChild(a),a.click(),document.body.appendChild(a)}function d(e){return Object(a["a"])({url:"/api/v1/work-order/process-structure",method:"get",params:e})}function p(e){return Object(a["a"])({url:"/api/v1/work-order/create",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/api/v1/work-order/list",method:"get",params:e})}function f(e){for(var t="/api/v1/work-order/circulation-list",s=Object.keys(e),a=0;a<s.length;a++)0===a&&(t+="?"),a>0&&(t+="&"),t=t+s[a]+"="+e[s[a]];c(t,"工单时间明细.xlsx")}function v(e){return Object(a["a"])({url:"/api/v1/work-order/handle",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/api/v1/work-order/suspend",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/api/v1/work-order/unity",method:"get",params:e})}function b(e){return Object(a["a"])({url:"/api/v1/work-order/inversion",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/api/v1/work-order/urge",method:"get",params:e})}function _(e,t){return Object(a["a"])({url:"/api/v1/work-order/active-order/".concat(t),method:"put",data:e})}function w(e){return Object(a["a"])({url:"/api/v1/work-order/delete/".concat(e),method:"delete"})}function x(e){return Object(a["a"])({url:"/api/v1/work-order/reopen/".concat(e),method:"post"})}s.d(t,"g",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"b",(function(){return f})),s.d(t,"e",(function(){return v})),s.d(t,"i",(function(){return h})),s.d(t,"j",(function(){return g})),s.d(t,"f",(function(){return b})),s.d(t,"k",(function(){return y})),s.d(t,"a",(function(){return _})),s.d(t,"d",(function(){return w})),s.d(t,"h",(function(){return x}))},"6ea5":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("WorkOrderSearch",{attrs:{genre:"related"},on:{handleSearch:e.handleSearch}})],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.ticketList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"流程",prop:"process_name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v("\n            "+e._s(s.row.state_name)+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前处理人","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("span",[e._v(e._s(s.row.principals))]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级","show-overflow-tooltip":!0,width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2===s.row.priority?t("span",[t("el-tag",{attrs:{type:"warning"}},[e._v("紧急")])],1):3===s.row.priority?t("span",[t("el-tag",{attrs:{type:"danger"}},[e._v("非常紧急")])],1):t("span",[t("el-tag",{attrs:{type:"success"}},[e._v("一般")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否结束","show-overflow-tooltip":!0,width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("否")]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("是")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:related:select"],expression:"['process:list:related:select']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleView(s.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"转交工单",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"节点",prop:"node_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择节点",size:"small"},model:{value:e.ruleForm.node_id,callback:function(t){e.$set(e.ruleForm,"node_id",t)},expression:"ruleForm.node_id"}},e._l(e.nodeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.label,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"用户",prop:"user_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"选择用户",size:"small"},model:{value:e.ruleForm.user_id,callback:function(t){e.$set(e.ruleForm,"user_id",t)},expression:"ruleForm.user_id"}},e._l(e.users,(function(e,s){return t("el-option",{key:s,attrs:{label:e.nickName,value:e.userId}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)},r=[],i=s("6da4"),n=s("26d5"),l={components:{WorkOrderSearch:n["default"]},data:function(){return{users:[],nodeList:[],dialogVisible:!1,queryParams:{},total:0,loading:!1,ticketList:[],listQuery:{page:1,per_page:10},ruleForm:{work_order_id:"",node_id:"",user_id:"",remarks:""},rules:{node_id:[{required:!0,message:"请选择节点",trigger:"change"}],user_id:[{required:!0,message:"请选择用户",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,this.listQuery.classify=3,Object(i["l"])(this.listQuery).then((function(t){e.ticketList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleSearch:function(e){for(var t in e)this.listQuery[t]=e[t];this.getList()},handleView:function(e){this.$router.push({name:"ProcessListHandle",query:{workOrderId:e.id,processId:e.process}})},handleSelectionChange:function(){}}},o=l,c=s("2877"),u=Object(c["a"])(o,a,r,!1,null,"7b20ee00",null);t["default"]=u.exports},"6efe":function(e,t,s){"use strict";s("75c2")},"70eb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入角色名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.roleName,callback:function(t){e.$set(e.queryParams,"roleName",t)},expression:"queryParams.roleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限字符",prop:"roleKey"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入权限字符",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.roleKey,callback:function(t){e.$set(e.queryParams,"roleKey",t)},expression:"queryParams.roleKey"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:add"],expression:"['system:sysrole:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:edit"],expression:"['system:sysrole:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("编辑")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:remove"],expression:"['system:sysrole:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:export"],expression:"['system:sysrole:export']"}],attrs:{type:"warning",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.roleList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"角色编号",prop:"roleId",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"角色名称",prop:"roleName","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"权限字符",prop:"roleKey","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"显示顺序",prop:"roleSort",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(t){return e.handleStatusChange(s.row)}},model:{value:s.row.status,callback:function(t){e.$set(s.row,"status",t)},expression:"scope.row.status"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:edit"],expression:"['system:sysrole:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysrole:remove"],expression:"['system:sysrole:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"500px"},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[t("el-input",{attrs:{placeholder:"请输入角色名称",disabled:e.isEdit},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限字符",prop:"roleKey"}},[t("el-input",{attrs:{placeholder:"请输入权限字符",disabled:e.isEdit},model:{value:e.form.roleKey,callback:function(t){e.$set(e.form,"roleKey",t)},expression:"form.roleKey"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"角色顺序",prop:"roleSort"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.roleSort,callback:function(t){e.$set(e.form,"roleSort",t)},expression:"form.roleSort"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单权限"}},[t("el-tree",{ref:"menu",attrs:{data:e.menuOptions,"show-checkbox":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.openDataScope,width:"500px"},on:{"update:visible":function(t){e.openDataScope=t}}},[t("el-form",{attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"角色名称"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限字符"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.roleKey,callback:function(t){e.$set(e.form,"roleKey",t)},expression:"form.roleKey"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限范围"}},[t("el-select",{model:{value:e.form.dataScope,callback:function(t){e.$set(e.form,"dataScope",t)},expression:"form.dataScope"}},e._l(e.dataScopeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.form.dataScope,expression:"form.dataScope == 2"}],attrs:{label:"数据权限"}},[t("el-tree",{ref:"dept",attrs:{data:e.deptOptions,"show-checkbox":"","default-expand-all":"","node-key":"id","empty-text":"加载中，请稍后",props:e.defaultProps}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitDataScope}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancelDataScope}},[e._v("取 消")])],1)],1)],1)],1)},r=[],i=s("3528"),n=s("a6dc"),l=s("fcb7"),o=s("ed08"),c={name:"Role",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,total:0,roleList:[],title:"",open:!1,openDataScope:!1,isEdit:!1,dateRange:[],dataScopeOptions:[{value:"1",label:"全部数据权限"},{value:"2",label:"自定数据权限"},{value:"3",label:"本部门数据权限"},{value:"4",label:"本部门及以下数据权限"},{value:"5",label:"仅本人数据权限"}],menuOptions:[],deptOptions:[],queryParams:{pageIndex:1,pageSize:10,roleName:void 0,roleKey:void 0,status:void 0},form:{},defaultProps:{children:"children",label:"label"},rules:{roleName:[{required:!0,message:"角色名称不能为空",trigger:"blur"}],roleKey:[{required:!0,message:"权限字符不能为空",trigger:"blur"}],roleSort:[{required:!0,message:"角色顺序不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(i["g"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.roleList=t.data.list,e.total=t.data.count,e.loading=!1}))},getMenuTreeselect:function(){var e=this;Object(n["f"])().then((function(t){e.menuOptions=t.data}))},getDeptTreeselect:function(){var e=this;Object(l["g"])().then((function(t){e.deptOptions=t.data.list}))},getMenuAllCheckedKeys:function(){var e=this.$refs.menu.getHalfCheckedKeys(),t=this.$refs.menu.getCheckedKeys();return e.unshift.apply(e,t),e},getDeptAllCheckedKeys:function(){var e=this.$refs.dept.getCheckedKeys();return e},getRoleMenuTreeselect:function(e){var t=this;Object(n["e"])(e).then((function(e){t.menuOptions=e.menus,t.$nextTick((function(){t.$refs.menu.setCheckedKeys(e.checkedKeys)}))}))},getRoleDeptTreeselect:function(e){var t=this;Object(l["f"])(e).then((function(e){t.deptOptions=e.depts,t.$nextTick((function(){t.$refs.dept.setCheckedKeys(e.checkedKeys)}))}))},handleStatusChange:function(e){var t=this,s="0"===e.status?"启用":"停用";this.$confirm('确认要"'+s+'""'+e.roleName+'"角色吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.roleId,e.status)})).then((function(){t.msgSuccess(s+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},cancel:function(){this.open=!1,this.reset()},cancelDataScope:function(){this.openDataScope=!1,this.reset()},reset:function(){void 0!==this.$refs.menu&&this.$refs.menu.setCheckedKeys([]),this.form={roleId:void 0,roleName:void 0,roleKey:void 0,roleSort:0,status:"0",menuIds:[],deptIds:[],remark:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.pageIndex=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.roleId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){this.reset(),this.getMenuTreeselect(),this.open=!0,this.title="添加角色",this.isEdit=!1},handleUpdate:function(e){var t=this;this.reset();var s=e.roleId||this.ids;Object(i["e"])(s).then((function(e){t.form=e.data,t.open=!0,t.title="修改角色",t.isEdit=!0,t.getRoleMenuTreeselect(s)}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.roleId?(e.form.menuIds=e.getMenuAllCheckedKeys(),Object(i["h"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))):(e.form.menuIds=e.getMenuAllCheckedKeys(),Object(i["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)}))))}))},submitDataScope:function(){var e=this;void 0!==this.form.roleId&&(this.form.deptIds=this.getDeptAllCheckedKeys(),Object(i["c"])(this.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.openDataScope=!1,e.getList()):e.msgError(t.msg)})))},handleDelete:function(e){var t=this,s=e.roleId||this.ids;this.$confirm('是否确认删除角色编号为"'+s+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["d"])(s)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this;this.$confirm("是否确认导出所有角色数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.downloadLoading=!0,Promise.all([s.e("chunk-23b9c8dc"),s.e("chunk-748b566e")]).then(s.bind(null,"4bf8d")).then((function(t){var s=["角色编号","角色名称","权限字符","显示顺序","状态","创建时间"],a=["roleId","roleName","roleKey","roleSort","status","create_time"],r=e.roleList,i=Object(o["c"])(a,r);t.export_json_to_excel({header:s,data:i,filename:"角色管理",autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1}))}))}}},u=c,d=s("2877"),p=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},7110:function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form-item",{attrs:{label:"分类名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入分类名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:classify:add"],expression:"['process:admin:classify:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleCreate}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.classifyList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",prop:"name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"创建者",prop:"create_name","show-overflow-tooltip":!0,width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:classify:edit"],expression:"['process:admin:classify:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:classify:delete"],expression:"['process:admin:classify:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{attrs:{title:1===e.dialogFormVisibleName?"新建分类":"编辑分类",visible:e.open,width:"600px"},on:{"update:visible":function(t){e.open=t}}},[t("div",{staticClass:"tpl-create-content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticStyle:{width:"95%"},attrs:{label:"分类名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){1===e.dialogFormVisibleName?e.submitForm("ruleForm"):e.editForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)])],1)],1)},r=[],i=s("5f1e"),n={name:"Classify",data:function(){return{dialogFormVisibleName:1,queryParams:{pageIndex:1,pageSize:10},loading:!0,ids:[],single:!0,multiple:!0,total:0,open:!1,classifyList:[],listQuery:{page:1,per_page:10},ruleForm:{id:void 0,name:""},rules:{name:[{required:!0,message:"请输入流程分类",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,Object(i["a"])(this.listQuery).then((function(t){e.classifyList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleCreate:function(){this.ruleForm={id:void 0,name:""},this.dialogFormVisibleName=1,this.open=!0},handleEdit:function(e){this.dialogFormVisibleName=2,this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.open=!0},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(i["b"])(t.ruleForm).then((function(e){void 0!==e&&(t.getList(),t.$message({type:"success",message:"分类已增加!"}),t.open=!1)}))}))},editForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(i["d"])(t.ruleForm).then((function(e){void 0!==e&&(t.getList(),t.$message({type:"success",message:"分类已更新!"}),t.open=!1)}))}))},handleQuery:function(){this.queryParams.pageIndex=1,this.queryParams.pageSize=10,this.getList()},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["c"])({classifyId:e.id}).then((function(e){void 0!==e&&(t.getList(),t.$message({type:"success",message:"分类已删除!"}))}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(){}}},l=n,o=s("2877"),c=Object(o["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},7115:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-activity"},[t("div",{staticClass:"post"},[t("div",{staticClass:"user-block"},[t("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/57ed425a-c71e-4201-9428-68760c0537c4.jpg"+e.avatarPrefix}}),e._v(" "),t("span",{staticClass:"username text-muted"},[e._v("Iron Man")]),e._v(" "),t("span",{staticClass:"description"},[e._v("Shared publicly - 7:30 PM today")])]),e._v(" "),t("p",[e._v("\n      Lorem ipsum represents a long-held tradition for designers,\n      typographers and the like. Some people hate it and argue for\n      its demise, but others ignore the hate as they create awesome\n      tools to help create filler text for everyone from bacon lovers\n      to Charlie Sheen fans.\n    ")]),e._v(" "),t("ul",{staticClass:"list-inline"},[e._m(0),e._v(" "),t("li",[t("span",{staticClass:"link-black text-sm"},[t("svg-icon",{attrs:{"icon-class":"like"}}),e._v("\n          Like\n        ")],1)])])]),e._v(" "),t("div",{staticClass:"post"},[t("div",{staticClass:"user-block"},[t("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/9e2a5d0a-bd5b-457f-ac8e-86554616c87b.jpg"+e.avatarPrefix}}),e._v(" "),t("span",{staticClass:"username text-muted"},[e._v("Captain American")]),e._v(" "),t("span",{staticClass:"description"},[e._v("Sent you a message - yesterday")])]),e._v(" "),t("p",[e._v("\n      Lorem ipsum represents a long-held tradition for designers,\n      typographers and the like. Some people hate it and argue for\n      its demise, but others ignore the hate as they create awesome\n      tools to help create filler text for everyone from bacon lovers\n      to Charlie Sheen fans.\n    ")]),e._v(" "),t("ul",{staticClass:"list-inline"},[e._m(1),e._v(" "),t("li",[t("span",{staticClass:"link-black text-sm"},[t("svg-icon",{attrs:{"icon-class":"like"}}),e._v("\n          Like\n        ")],1)])])]),e._v(" "),t("div",{staticClass:"post"},[t("div",{staticClass:"user-block"},[t("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/fb57f689-e1ab-443c-af12-8d4066e202e2.jpg"+e.avatarPrefix}}),e._v(" "),t("span",{staticClass:"username"},[e._v("Spider Man")]),e._v(" "),t("span",{staticClass:"description"},[e._v("Posted 4 photos - 2 days ago")])]),e._v(" "),t("div",{staticClass:"user-images"},[t("el-carousel",{attrs:{interval:6e3,type:"card",height:"220px"}},e._l(e.carouselImages,(function(s){return t("el-carousel-item",{key:s},[t("img",{staticClass:"image",attrs:{src:s+e.carouselPrefix}})])})),1)],1),e._v(" "),t("ul",{staticClass:"list-inline"},[e._m(2),e._v(" "),t("li",[t("span",{staticClass:"link-black text-sm"},[t("svg-icon",{attrs:{"icon-class":"like"}}),e._v(" Like")],1)])])])])},r=[function(){var e=this,t=e._self._c;return t("li",[t("span",{staticClass:"link-black text-sm"},[t("i",{staticClass:"el-icon-share"}),e._v("\n          Share\n        ")])])},function(){var e=this,t=e._self._c;return t("li",[t("span",{staticClass:"link-black text-sm"},[t("i",{staticClass:"el-icon-share"}),e._v("\n          Share\n        ")])])},function(){var e=this,t=e._self._c;return t("li",[t("span",{staticClass:"link-black text-sm"},[t("i",{staticClass:"el-icon-share"}),e._v(" Share")])])}],i="?imageView2/1/w/80/h/80",n="?imageView2/2/h/440",l={data:function(){return{carouselImages:["https://wpimg.wallstcn.com/9679ffb0-9e0b-4451-9916-e21992218054.jpg","https://wpimg.wallstcn.com/bcce3734-0837-4b9f-9261-351ef384f75a.jpg","https://wpimg.wallstcn.com/d1d7b033-d75e-4cd6-ae39-fcd5f1c0a7c5.jpg","https://wpimg.wallstcn.com/50530061-851b-4ca5-9dc5-2fead928a939.jpg"],avatarPrefix:i,carouselPrefix:n}}},o=l,c=(s("fe22"),s("2877")),u=Object(c["a"])(o,a,r,!1,null,"1066d76c",null);t["default"]=u.exports},"75c2":function(e,t,s){},"75fe":function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form-item",{attrs:{label:"任务名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入任务名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:task:add"],expression:"['process:admin:task:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleCreate}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.taskList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"UUID",prop:"uuid"}}),e._v(" "),t("el-table-column",{attrs:{label:"名称",prop:"name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"任务类型",prop:"classify","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"创建者",prop:"creator"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:task:edit"],expression:"['process:admin:task:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:admin:task:delete"],expression:"['process:admin:task:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),e._v(" "),t("el-dialog",{attrs:{title:1===e.dialogFormVisibleName?"新建任务":"编辑任务","close-on-click-modal":!1,visible:e.open},on:{"update:visible":function(t){e.open=t}}},[t("div",{staticClass:"tpl-create-content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入任务名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"类型",prop:"classify"}},[t("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择任务类型"},on:{change:e.selectTaskType},model:{value:e.ruleForm.classify,callback:function(t){e.$set(e.ruleForm,"classify",t)},expression:"ruleForm.classify"}},[t("el-option",{attrs:{label:"Python",value:"python"}}),e._v(" "),t("el-option",{attrs:{label:"Shell",value:"shell"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"任务",prop:"content"}},[t("div",{staticClass:"codemirror-div"},[e.codemirrorRefresh?t("codemirror",{ref:"codemirror",staticClass:"codemirror",attrs:{value:e.ruleForm.content,options:e.contentOptions}}):e._e()],1)])],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){1===e.dialogFormVisibleName?e.submitForm("ruleForm"):e.editForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1)])],1)],1)},r=[],i=(s("4917"),s("40d1")),n=s("8f94");s("db91"),s("02f0");var l={name:"Task",components:{codemirror:n["codemirror"]},data:function(){return{dialogFormVisibleName:1,queryParams:{pageIndex:1,pageSize:10},loading:!0,ids:[],single:!0,multiple:!0,total:0,open:!1,codemirrorRefresh:!0,taskList:[],ruleForm:{name:"",classify:"",content:""},contentOptions:{flattenSpans:!1,matchBrackets:!0,lineWiseCopyCut:!0,tabSize:4,value:"",mode:"python",lineNumbers:!0,line:!0,smartIndent:!0,autoCloseBrackets:!0,foldGutter:!0,indentUnit:4,styleActiveLine:!0},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{validator:function(e,t,s){t.match(/^[_a-zA-Z0-9]+$/)?s():s(new Error("只能输入大小写英文及下划线"))},trigger:"blur"}],classify:[{required:!0,message:"请选择任务类型",trigger:"change"}],content:[{required:!0,message:"请输入任务内容",trigger:"blur"}]},listQuery:{page:1,per_page:10}}},created:function(){this.getList()},methods:{selectTaskType:function(){""===this.ruleForm.classify?this.contentOptions.mode="python":this.contentOptions.mode=this.ruleForm.classify,this.codemirrorRefresh=!1,this.codemirrorRefresh=!0},getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,Object(i["d"])(this.listQuery).then((function(t){e.taskList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},handleQuery:function(e){this.listQuery.name=e.name,this.getList()},handleCreate:function(){this.ruleForm={name:"",classify:"",content:""},this.dialogFormVisibleName=1,this.open=!0},handleEdit:function(e){var t=this;this.dialogFormVisibleName=2,Object(i["c"])({file_name:e.full_name}).then((function(s){t.ruleForm={name:e.name,full_name:e.full_name,classify:e.classify,content:s.data},t.open=!0}))},submitForm:function(e){var t=this;this.ruleForm.content=this.$refs.codemirror.content,this.$refs[e].validate((function(e){e&&Object(i["a"])(t.ruleForm).then((function(){t.getList(),t.open=!1,t.$message({message:"任务脚本创建成功",type:"success"})}))}))},editForm:function(e){var t=this;this.ruleForm.content=this.$refs.codemirror.content,this.$refs[e].validate((function(e){e&&Object(i["e"])(t.ruleForm).then((function(e){t.getList(),t.open=!1,t.$message({message:"任务脚本更新成功",type:"success"})}))}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["b"])({full_name:e.full_name}).then((function(){t.getList(),t.$message({type:"success",message:"删除成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(){}}},o=l,c=(s("bc3f"),s("2877")),u=Object(c["a"])(o,a,r,!1,null,"8e46b1a0",null);t["default"]=u.exports},"7a50":function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card remove-padding-bottom"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("el-form-item",{attrs:{label:"流程名称"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入流程名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),e._l(e.processLists,(function(s){return t("div",{key:s.id},[0!==s.process_list.length?t("div",[t("div",{staticClass:"workflow-classify-title"},[e._v("\n          "+e._s(s.name)+"\n        ")]),e._v(" "),t("div",{staticStyle:{"margin-bottom":"15px"}},[e._l(s.process_list,(function(s,a){return[t("el-tooltip",{key:s.id,attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                "+e._s(s.name)+"\n                "),t("br"),e._v("\n                "+e._s(s.remarks)+"\n              ")]),e._v(" "),t("div",{staticClass:"workflow-classify-div",style:(a+1)%5===0?{"padding-right":0}:{"padding-right":"12px"}},[t("el-button",{staticStyle:{width:"100%"},attrs:{plain:""},on:{click:function(t){return e.submitWorkOrder(s.id)}}},[t("div",{staticClass:"process-button-div"},[t("div",{staticClass:"process-div-icon"},[t("e-icon",{staticClass:"process-div-el-icon",attrs:{"icon-name":s.icon}})],1),e._v(" "),t("div",{staticClass:"process-div-body"},[t("div",{staticClass:"process-div-title ellipsis"},[e._v("\n                        "+e._s(s.name)+"\n                      ")]),e._v(" "),t("div",{staticClass:"process-div-remarks ellipsis"},[e._v("\n                        "+e._s(s.remarks)+"\n                      ")])])])])],1)])]}))],2)]):e._e()])}))],2)],1)},r=[],i=s("edd9"),n={name:"ApplyProcessList",data:function(){return{processLists:[],listQuery:{}}},created:function(){this.getProcessList()},methods:{getProcessList:function(){var e=this;Object(i["a"])(this.listQuery).then((function(t){e.processLists=t.data}))},handleQuery:function(){this.getProcessList()},submitWorkOrder:function(e){this.$router.push({path:"/process/create-ticket",query:{processId:e}})}}},l=n,o=(s("a17b"),s("2877")),c=Object(o["a"])(l,a,r,!1,null,"9279f168",null);t["default"]=c.exports},83782:function(e,t,s){"use strict";s("0588")},8548:function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rank"},[t("h4",{staticClass:"title"},[e._v("\n    "+e._s(e.title)+"\n    "),t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"最常被提交的流程排行及提交的次数。",placement:"top-end"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),e._v(" "),t("ul",{staticClass:"list"},e._l(e.list,(function(s,a){return t("li",{key:a},[t("span",{class:a<3?"active":null},[e._v(e._s(a+1))]),e._v(" "),t("span",[e._v(e._s(s.name))]),e._v(" "),t("span",[e._v(e._s(s.total))])])})),0)])},r=[],i={name:"RankList",props:{title:{type:String,default:""},list:{type:Array,default:null}}},n=i,l=(s("99ef"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"3f8eafd7",null);t["default"]=o.exports},"883d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"listQuery",attrs:{model:e.listQuery,inline:!0}},[t("WorkOrderSearch",{attrs:{genre:"all"},on:{handleSearch:e.handleSearch,handleExport:e.handleExport}})],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.ticketList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"ID",prop:"id",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"流程",prop:"process_name","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"当前状态","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v("\n            "+e._s(s.row.state_name)+"\n          ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"当前处理人","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("span",[e._v(e._s(s.row.principals))]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"优先级","show-overflow-tooltip":!0,width:"120",align:"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[2===s.row.priority?t("span",[t("el-tag",{attrs:{type:"warning"}},[e._v("紧急")])],1):3===s.row.priority?t("span",[t("el-tag",{attrs:{type:"danger"}},[e._v("非常紧急")])],1):t("span",[t("el-tag",{attrs:{type:"success"}},[e._v("一般")])],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"是否结束","show-overflow-tooltip":!0,width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[0===s.row.is_end?t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("否")]):t("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("是")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"240"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:all:select"],expression:"['process:list:all:select']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleView(s.row)}}},[e._v("查看")]),e._v(" "),0===s.row.is_end?t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:all:inversion"],expression:"['process:list:all:inversion']"}],attrs:{size:"mini",type:"text",icon:"el-icon-position"},on:{click:function(t){return e.handleInversion(s.row)}}},[e._v("转交")]):e._e(),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:all:delete"],expression:"['process:list:all:delete']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"转交工单",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"60px"}},[t("el-form-item",{attrs:{label:"节点",prop:"node_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择节点",size:"small"},model:{value:e.ruleForm.node_id,callback:function(t){e.$set(e.ruleForm,"node_id",t)},expression:"ruleForm.node_id"}},e._l(e.nodeList,(function(e,s){return t("el-option",{key:s,attrs:{label:e.label,value:e.id}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"用户",prop:"user_id"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"选择用户",size:"small"},model:{value:e.ruleForm.user_id,callback:function(t){e.$set(e.ruleForm,"user_id",t)},expression:"ruleForm.user_id"}},e._l(e.users,(function(e,s){return t("el-option",{key:s,attrs:{label:e.nickName,value:e.userId}})})),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",size:"small"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("关闭")])],1)],1)],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)},r=[],i=s("6da4"),n=s("b150"),l=s("26d5"),o={components:{WorkOrderSearch:l["default"]},data:function(){return{users:[],nodeList:[],dialogVisible:!1,queryParams:{},total:0,loading:!1,ticketList:[],listQuery:{page:1,per_page:10},ruleForm:{work_order_id:"",node_id:"",user_id:"",remarks:""},rules:{node_id:[{required:!0,message:"请选择节点",trigger:"change"}],user_id:[{required:!0,message:"请选择用户",trigger:"change"}]}}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,this.listQuery.classify=4,Object(i["l"])(this.listQuery).then((function(t){e.ticketList=t.data.data,e.queryParams.pageIndex=t.data.page,e.queryParams.pageSize=t.data.per_page,e.total=t.data.total_count,e.loading=!1}))},exportCirculation:function(){this.listQuery.page=this.queryParams.pageIndex,this.listQuery.per_page=this.queryParams.pageSize,this.listQuery.classify=4,Object(i["b"])(this.listQuery)},handleSearch:function(e){for(var t in e)this.listQuery[t]=e[t];this.getList()},handleExport:function(e){for(var t in e)this.listQuery[t]=e[t];this.exportCirculation()},handleView:function(e){this.$router.push({name:"ProcessListHandle",query:{workOrderId:e.id,processId:e.process}})},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])(e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleUnity:function(e){var t=this;this.$confirm("此操作将会结束该工单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["j"])({work_oroder_id:e.id}).then((function(e){200===e.code&&t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleInversion:function(e){var t=this;this.dialogVisible=!0,this.ruleForm.work_order_id=e.id,this.nodeList=e.state,1===this.nodeList.length&&(this.ruleForm.node_id=this.nodeList[0].id),Object(n["i"])({pageSize:999999}).then((function(e){t.users=e.data.list}))},handleSelectionChange:function(){},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(i["f"])(t.ruleForm).then((function(e){200===e.code&&(t.getList(),t.dialogVisible=!1)}))}))}}},c=o,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,"5354f304",null);t["default"]=d.exports},"88c9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("img",{staticClass:"img-circle img-lg",attrs:{src:e.options.img,title:"点击上传头像"},on:{click:function(t){return e.editCropper()}}}),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px"},on:{"update:visible":function(t){e.open=t}}},[t("el-row",[t("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[t("vue-cropper",{ref:"cropper",attrs:{img:e.options.img,info:!0,"auto-crop":e.options.autoCrop,"auto-crop-width":e.options.autoCropWidth,"auto-crop-height":e.options.autoCropHeight,"fixed-box":e.options.fixedBox},on:{realTime:e.realTime}})],1),e._v(" "),t("el-col",{style:{height:"350px"},attrs:{xs:24,md:12}},[t("div",{staticClass:"avatar-upload-preview"},[t("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])],1),e._v(" "),t("br"),e._v(" "),t("el-row",[t("el-col",{attrs:{lg:2,md:2}},[t("el-upload",{attrs:{action:"#","http-request":e.requestUpload,"show-file-list":!1,"before-upload":e.beforeUpload}},[t("el-button",{attrs:{size:"small"}},[e._v("\n            上传\n            "),t("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1),e._v(" "),t("el-col",{attrs:{lg:{span:1,offset:2},md:2}},[t("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.changeScale(1)}}})],1),e._v(" "),t("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[t("el-button",{attrs:{icon:"el-icon-minus",size:"small"},on:{click:function(t){return e.changeScale(-1)}}})],1),e._v(" "),t("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[t("el-button",{attrs:{icon:"el-icon-refresh-left",size:"small"},on:{click:function(t){return e.rotateLeft()}}})],1),e._v(" "),t("el-col",{attrs:{lg:{span:1,offset:1},md:2}},[t("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){return e.rotateRight()}}})],1),e._v(" "),t("el-col",{attrs:{lg:{span:2,offset:6},md:2}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.uploadImg()}}},[e._v("提 交")])],1)],1)],1)],1)},r=[],i=s("4360"),n=s("7e79"),l=s("b150"),o={components:{VueCropper:n["VueCropper"]},props:{user:{type:Object}},data:function(){return{open:!1,title:"修改头像",options:{img:i["a"].getters.avatar,autoCrop:!0,autoCropWidth:200,autoCropHeight:200,fixedBox:!0},previews:{}}},methods:{editCropper:function(){this.open=!0},requestUpload:function(){},rotateLeft:function(){this.$refs.cropper.rotateLeft()},rotateRight:function(){this.$refs.cropper.rotateRight()},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},beforeUpload:function(e){var t=this;if(-1===e.type.indexOf("image/"))this.msgError("文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。");else{var s=new FileReader;s.readAsDataURL(e),s.onload=function(){t.options.img=s.result}}},uploadImg:function(){var e=this;this.$refs.cropper.getCropBlob((function(t){var s=new FormData;s.append("upload[]",t),Object(l["m"])(s).then((function(t){200===t.code?(e.open=!1,e.options.img="http://10.140.96.47:8002/"+t.data,e.msgSuccess("修改成功")):e.msgError(t.msg),e.$refs.cropper.clearCrop()}))}))},realTime:function(e){this.previews=e}}},c=o,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},"8ad2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block"}},[t("label",{staticClass:"radio-label"},[e._v("Cell Auto-Width: ")]),e._v(" "),t("el-radio-group",{model:{value:e.autoWidth,callback:function(t){e.autoWidth=t},expression:"autoWidth"}},[t("el-radio",{attrs:{label:!0,border:""}},[e._v("\n      True\n    ")]),e._v(" "),t("el-radio",{attrs:{label:!1,border:""}},[e._v("\n      False\n    ")])],1)],1)},r=[],i={props:{value:{type:Boolean,default:!0}},computed:{autoWidth:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},"8fc3":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("公共信息")])]),e._v(" "),t("div",{staticClass:"text item"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{staticStyle:{"margin-bottom":"13px"},attrs:{label:"标题:",prop:"title"}},[t("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"优先级:",prop:"priority"}},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.priority,callback:function(t){e.$set(e.ruleForm,"priority",t)},expression:"ruleForm.priority"}},[t("el-radio",{attrs:{label:1}},[e._v("一般")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("紧急")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("非常紧急")])],1)],1)],1)],1)]),e._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("表单信息")])]),e._v(" "),t("div",{staticClass:"text item"},[e._l(e.processStructureValue.tpls,(function(s,a){return[t("fm-generate-form",{directives:[{name:"show",rawName:"v-show",value:void 0===e.currentNode.hideTpls||null===e.currentNode.hideTpls||-1===e.currentNode.hideTpls.indexOf(s.id),expression:"currentNode.hideTpls===undefined ||\n            currentNode.hideTpls===null ||\n            currentNode.hideTpls.indexOf(tplItem.id)===-1"}],key:a,ref:"generateForm-"+s.id,refInFor:!0,attrs:{preview:void 0!==e.currentNode.hideTpls&&null!==e.currentNode.hideTpls&&-1!==e.currentNode.hideTpls.indexOf(s.id),remote:e.remoteFunc,data:s.form_structure,disabled:void 0!==e.currentNode.readonlyTpls&&null!==e.currentNode.readonlyTpls&&-1!==e.currentNode.readonlyTpls.indexOf(s.id)||null}})]}))],2),e._v(" "),t("hr",{staticStyle:{"background-color":"#d9d9d9",border:"0",height:"1px"}}),e._v(" "),t("div",{staticClass:"text item",staticStyle:{"text-align":"center","margin-top":"18px"}},e._l(e.processStructureValue.edges,(function(s,a){return t("el-button",{directives:[{name:"show",rawName:"v-show",value:s.source===e.processStructureValue.nodes[e.active].id,expression:"item.source===processStructureValue.nodes[active].id"}],key:a,attrs:{type:"primary",disabled:e.submitDisabled},on:{click:function(t){return e.submitAction(s)}}},[e._v("\n        "+e._s(s.label)+"\n      ")])})),1)])],1)},r=[],i=(s("4f7f"),s("1c4c"),s("ac6a"),s("5df3"),s("2d63")),n=s("c80c"),l=(s("96cf"),s("3b8d")),o=(s("7f7f"),s("2b0e")),c=s("2ced"),u=(s("659a"),s("6da4")),d=s("b150"),p=s("fcb7");o["default"].component(c["a"].name,c["a"]);var m={name:"Create",data:function(){return{submitDisabled:!1,active:0,processStructureValue:{},ruleForm:{title:"",priority:1,process:"",classify:"",state:[],source:"",source_state:"",process_method:"",tpls:{form_structure:[],form_data:[]},tasks:[]},rules:{title:[{required:!0,message:"请输入工单标题",trigger:"blur"}],priority:[{required:!0,message:"请选择工单优先级",trigger:"blur"}]},remoteFunc:{userList:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(t){var s,a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["i"])({pageSize:999999});case 2:s=e.sent,a=s.data.list,t(a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deptTreeList:function(){var e=Object(l["a"])(Object(n["a"])().mark((function e(t){var s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["d"])();case 2:s=e.sent,t(s.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}},created:function(){this.getProcessNodeList()},methods:{getProcessNodeList:function(){var e=this;Object(u["g"])({processId:this.$route.query.processId}).then((function(t){e.processStructureValue=t.data,e.currentNode=e.processStructureValue.nodes[0]}))},submitAction:function(e){var t=this;this.$refs["ruleForm"].validate((function(s){if(s){t.submitDisabled=!0;var a={};t.ruleForm.process=parseInt(t.$route.query.processId),t.ruleForm.classify=t.processStructureValue.process.classify,a["id"]=e.target,t.ruleForm.source_state=t.processStructureValue.nodes[t.active].label;var r=[];t.ruleForm.tpls={form_structure:[],form_data:[]};var n,l=Object(i["a"])(t.processStructureValue.tpls);try{for(l.s();!(n=l.n()).done;){var o=n.value;o.form_structure.id=o.id,t.ruleForm.tpls.form_structure.push(o.form_structure),r.push(t.$refs["generateForm-"+o.id][0].getData())}}catch(c){l.e(c)}finally{l.f()}Promise.all(r).then((function(s){var r,n=Object(i["a"])(t.processStructureValue.nodes);try{for(n.s();!(r=n.n()).done;){var l=r.value;if(l.id===e.target){void 0!==l.assignType&&(a["process_method"]=l.assignType),void 0!==l.assignValue&&("template"!==l.assignType?a["processor"]=Array.from(new Set(l.assignValue)):a["processor"]=l.assignValue),a["label"]=l.label;break}}}catch(c){n.e(c)}finally{n.f()}if(t.ruleForm.state=[a],t.ruleForm.tasks=void 0===t.processStructureValue.process.task?[]:t.processStructureValue.process.task,void 0!==t.processStructureValue.nodes[t.active].task&&t.processStructureValue.nodes[t.active].task.length>0){var o,d=Object(i["a"])(t.processStructureValue.nodes[t.active].task);try{for(d.s();!(o=d.n()).done;){var p=o.value;-1===t.ruleForm.tasks.indexOf(p)&&t.ruleForm.tasks.push(p)}}catch(c){d.e(c)}finally{d.f()}}t.ruleForm.source=t.processStructureValue.nodes[t.active].id,t.ruleForm.tpls.form_data=s,t.ruleForm.is_exec_task=e.isExecuteTask,Object(u["c"])(t.ruleForm).then((function(e){200===e.code&&t.$router.push({path:"/process/upcoming"})})).catch((function(){t.submitDisabled=!1}))})).catch((function(){t.submitDisabled=!1}))}}))}}},f=m,v=s("2877"),h=Object(v["a"])(f,a,r,!1,null,null,null);t["default"]=h.exports},"90c0":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("el-card",{attrs:{loading:e.loading,"body-style":{padding:"20px 24px 8px"},bordered:!1}},[t("div",{staticClass:"chart-card-header"},[t("div",{staticClass:"meta"},[t("span",{staticClass:"chart-card-title"},[e._t("title",(function(){return[e._v("\n          "+e._s(e.title)+"\n        ")]}))],2),e._v(" "),t("span",{staticClass:"chart-card-action"},[e._t("action")],2)]),e._v(" "),t("div",{staticClass:"total"},[e._t("total",(function(){return[t("span",[e._v(e._s("function"===typeof e.total&&e.total()||e.total))])]}))],2)]),e._v(" "),t("div",{staticClass:"chart-card-footer"},[t("div",{staticClass:"field"},[e._t("footer")],2)])])},r=[],i=(s("c5f6"),{name:"ChartCard",props:{title:{type:String,default:""},total:{type:[Function,Number,String],required:!1,default:null},loading:{type:Boolean,default:!1}}}),n=i,l=(s("c81e"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"553f4ef8",null);t["default"]=o.exports},9406:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-container"},[t(e.currentRole,{tag:"component"})],1)},r=[],i=s("3f2c"),n={name:"Dashboard",components:{adminDashboard:i["default"]},data:function(){return{currentRole:"adminDashboard"}},created:function(){}},l=n,o=s("2877"),c=Object(o["a"])(l,a,r,!1,null,null,null);t["default"]=c.exports},"956c":function(e,t,s){},"97c5":function(e,t,s){"use strict";s("21b0")},"99ef":function(e,t,s){"use strict";s("ce5c")},"9a73":function(e,t,s){},"9ed6":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{attrs:{id:"particles-js"}},[t("vue-particles",{attrs:{color:"#dedede","particle-opacity":.7,"particles-number":80,"shape-type":"circle","particle-size":4,"lines-color":"#dedede","lines-width":1,"line-linked":!0,"line-opacity":.4,"lines-distance":150,"move-speed":3,"hover-effect":!0,"hover-mode":"grab","click-effect":!0,"click-mode":"push"}})],1),e._v(" "),t("div",{staticClass:"login-weaper animated bounceInDown"},[t("div",{staticClass:"login-left"},[t("div",{staticClass:"login-time",domProps:{textContent:e._s(e.currentTime)}}),e._v(" "),t("img",{staticClass:"img",attrs:{src:e.logo,alt:""}}),e._v(" "),t("p",{staticClass:"title",domProps:{textContent:e._s(e.title)}})]),e._v(" "),t("div",{staticClass:"login-border"},[t("div",{staticClass:"login-main"},[t("div",{staticClass:"login-title"},[e._v(" 用户登录 ")]),e._v(" "),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"svg-container"},[t("i",{staticClass:"el-icon-user"})]),e._v(" "),t("el-input",{ref:"username",attrs:{placeholder:"用户名",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),t("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),t("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:[function(t){return e.checkCapslock.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}]},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),e._v(" "),e.isVerifyCodeTmp?[t("el-form-item",{staticStyle:{width:"66%",float:"left","margin-bottom":"13px"},attrs:{prop:"code"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"validCode"}})],1),e._v(" "),t("el-input",{ref:"username",staticStyle:{width:"75%"},attrs:{placeholder:"验证码",name:"username",type:"text",tabindex:"3",maxlength:"5",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),e._v(" "),t("div",{staticClass:"login-code",staticStyle:{cursor:"pointer",width:"30%",height:"48px",float:"right","background-color":"#f0f1f5"}},[t("img",{staticStyle:{height:"48px",width:"100%",border:"1px solid rgba(0,0,0, 0.1)","border-radius":"5px"},attrs:{src:e.codeUrl},on:{click:e.getCode}})])]:e._e(),e._v(" "),t("div",{staticStyle:{width:"100%",float:"left","margin-bottom":"13px"},attrs:{prop:"code"}},[t("el-checkbox",{model:{value:e.isLdapTmp,callback:function(t){e.isLdapTmp=t},expression:"isLdapTmp"}},[e._v("LDAP登陆")])],1),e._v(" "),t("el-button",{staticStyle:{width:"100%",padding:"12px 20px","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e.loading?t("span",[e._v("登 录 中...")]):t("span",[e._v("登 录")])])],2)],1)])])])},r=[],i=(s("ac6a"),s("456d"),s("db72")),n=s("b775");function l(){return Object(n["a"])({url:"/api/v1/getCaptcha",method:"get"})}var o=s("c1df"),c=s.n(o),u=s("2f62"),d={name:"LoginIndex",data:function(){return{isLdapTmp:!1,codeUrl:"",cookiePassword:"",loginForm:{username:"",password:"",rememberMe:!1,code:"",uuid:"",loginType:1},loginRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}]},passwordType:"password",capsTooltip:!1,loading:!1,redirect:void 0,otherQuery:{},currentTime:null}},computed:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["title","logo","isLdap","isVerifyCode"])),{},{isVerifyCodeTmp:function(){return this.isVerifyCode&&this.getCode(),this.isVerifyCode}}),watch:{$route:{handler:function(e){var t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0},isLdap:{handler:function(e){this.isLdapTmp=e}},isVerifyCode:{handler:function(e){e&&this.getCode()}}},created:function(){this.getCurrentTime()},mounted:function(){""===this.loginForm.username?this.$refs.username.focus():""===this.loginForm.password&&this.$refs.password.focus()},destroyed:function(){clearInterval(this.timer)},methods:{getCurrentTime:function(){var e=this;this.timer=setInterval((function(t){e.currentTime=c()().format("YYYY-MM-DD HH时mm分ss秒")}),1e3)},getCode:function(){var e=this;l().then((function(t){void 0!==t&&(e.codeUrl=t.data,e.loginForm.uuid=t.id)}))},checkCapslock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shiftKey,s=e.key;s&&1===s.length&&(this.capsTooltip=t&&s>="a"&&s<="z"||!t&&s>="A"&&s<="Z"),"CapsLock"===s&&!0===this.capsTooltip&&(this.capsTooltip=!1)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return!1;e.isLdapTmp?e.loginForm.loginType=1:e.loginForm.loginType=0,e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:"/"}),e.loading=!1})).catch((function(){e.loading=!1,e.getCode()}))}))},getOtherQuery:function(e){return Object.keys(e).reduce((function(t,s){return"redirect"!==s&&(t[s]=e[s]),t}),{})}}},p=d,m=(s("5ed3"),s("2877")),f=Object(m["a"])(p,a,r,!1,null,"d97ba79e",null);t["default"]=f.exports},a137:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("upload-excel-component",{attrs:{"on-success":e.handleSuccess,"before-upload":e.beforeUpload}}),e._v(" "),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","highlight-current-row":""}},e._l(e.tableHeader,(function(e){return t("el-table-column",{key:e,attrs:{prop:e,label:e}})})),1)],1)},r=[],i=function(){var e=this,t=e._self._c;return t("div",[t("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}}),e._v(" "),t("div",{staticClass:"drop",on:{drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover}},[e._v("\n    Drop excel file here or\n    "),t("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:e.loading,size:"mini",type:"primary"},on:{click:e.handleUpload}},[e._v("\n      Browse\n    ")])],1)])},n=[],l=(s("7f7f"),s("1146")),o=s.n(l),c={props:{beforeUpload:Function,onSuccess:Function},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(e){var t=e.header,s=e.results;this.excelData.header=t,this.excelData.results=s,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(e){if(e.stopPropagation(),e.preventDefault(),!this.loading){var t=e.dataTransfer.files;if(1===t.length){var s=t[0];if(!this.isExcel(s))return this.$message.error("Only supports upload .xlsx, .xls, .csv suffix files"),!1;this.upload(s),e.stopPropagation(),e.preventDefault()}else this.$message.error("Only support uploading one file!")}},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files,s=t[0];s&&this.upload(s)},upload:function(e){if(this.$refs["excel-upload-input"].value=null,this.beforeUpload){var t=this.beforeUpload(e);t&&this.readerData(e)}else this.readerData(e)},readerData:function(e){var t=this;return this.loading=!0,new Promise((function(s,a){var r=new FileReader;r.onload=function(e){var a=e.target.result,r=o.a.read(a,{type:"array"}),i=r.SheetNames[0],n=r.Sheets[i],l=t.getHeaderRow(n),c=o.a.utils.sheet_to_json(n);t.generateData({header:l,results:c}),t.loading=!1,s()},r.readAsArrayBuffer(e)}))},getHeaderRow:function(e){var t,s=[],a=o.a.utils.decode_range(e["!ref"]),r=a.s.r;for(t=a.s.c;t<=a.e.c;++t){var i=e[o.a.utils.encode_cell({c:t,r:r})],n="UNKNOWN "+t;i&&i.t&&(n=o.a.utils.format_cell(i)),s.push(n)}return s},isExcel:function(e){return/\.(xlsx|xls|csv)$/.test(e.name)}}},u=c,d=(s("83782"),s("2877")),p=Object(d["a"])(u,i,n,!1,null,"d2407dd6",null),m=p.exports,f={name:"UploadExcel",components:{UploadExcelComponent:m},data:function(){return{tableData:[],tableHeader:[]}},methods:{beforeUpload:function(e){var t=e.size/1024/1024<10;return!!t||(this.$message({message:"Please do not upload files larger than 1m in size.",type:"warning"}),!1)},handleSuccess:function(e){var t=e.results,s=e.header;this.tableData=t,this.tableHeader=s}}},v=f,h=Object(d["a"])(v,a,r,!1,null,null,null);t["default"]=h.exports},a17b:function(e,t,s){"use strict";s("a88e")},a36b:function(e,t,s){e.exports=s.p+"static/web/img/404.a57b6f31.png"},a6dc:function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return i})),s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return l})),s.d(t,"a",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"b",(function(){return u}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/menulist",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/api/v1/menu/"+e,method:"get"})}function n(){return Object(a["a"])({url:"/api/v1/menuTreeselect",method:"get"})}function l(e){return Object(a["a"])({url:"/api/v1/roleMenuTreeselect/"+e,method:"get"})}function o(e){return Object(a["a"])({url:"/api/v1/menu",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/api/v1/menu",method:"put",data:e})}function u(e){return Object(a["a"])({url:"/api/v1/menu/"+e,method:"delete"})}},a7dc:function(e,t,s){"use strict";s.r(t);var a=s("ed08");t["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var e=this;this.$_resizeHandler=Object(a["b"])((function(){e.chart&&e.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(e){"width"===e.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}},a88e:function(e,t,s){},a8c4:function(e,t,s){var a={"./views/dashboard":"9406","./views/dashboard/":"9406","./views/dashboard/admin":"3f2c","./views/dashboard/admin/":"3f2c","./views/dashboard/admin/components/ChartCard":"90c0","./views/dashboard/admin/components/ChartCard/":"90c0","./views/dashboard/admin/components/ChartCard/index":"90c0","./views/dashboard/admin/components/ChartCard/index.vue":"90c0","./views/dashboard/admin/components/HandlePeriod":"b602","./views/dashboard/admin/components/HandlePeriod/":"b602","./views/dashboard/admin/components/HandlePeriod/index":"b602","./views/dashboard/admin/components/HandlePeriod/index.vue":"b602","./views/dashboard/admin/components/HandleRank":"ea29","./views/dashboard/admin/components/HandleRank/":"ea29","./views/dashboard/admin/components/HandleRank/index":"ea29","./views/dashboard/admin/components/HandleRank/index.vue":"ea29","./views/dashboard/admin/components/RangeSubmit":"e8ba","./views/dashboard/admin/components/RangeSubmit/":"e8ba","./views/dashboard/admin/components/RangeSubmit/index":"e8ba","./views/dashboard/admin/components/RangeSubmit/index.vue":"e8ba","./views/dashboard/admin/components/RankList":"8548","./views/dashboard/admin/components/RankList/":"8548","./views/dashboard/admin/components/RankList/index":"8548","./views/dashboard/admin/components/RankList/index.vue":"8548","./views/dashboard/admin/components/mixins/resize":"a7dc","./views/dashboard/admin/components/mixins/resize.js":"a7dc","./views/dashboard/admin/index":"3f2c","./views/dashboard/admin/index.vue":"3f2c","./views/dashboard/index":"9406","./views/dashboard/index.vue":"9406","./views/error-page/401":"24e2","./views/error-page/401.vue":"24e2","./views/error-page/404":"1db4","./views/error-page/404.vue":"1db4","./views/excel/components/AutoWidthOption":"8ad2","./views/excel/components/AutoWidthOption.vue":"8ad2","./views/excel/components/BookTypeOption":"ebe1","./views/excel/components/BookTypeOption.vue":"ebe1","./views/excel/components/FilenameOption":"50ce","./views/excel/components/FilenameOption.vue":"50ce","./views/excel/upload-excel":"a137","./views/excel/upload-excel.vue":"a137","./views/login":"9ed6","./views/login/":"9ed6","./views/login/auth-redirect":"b829","./views/login/auth-redirect.vue":"b829","./views/login/components/SocialSignin":"c62e","./views/login/components/SocialSignin.vue":"c62e","./views/login/index":"9ed6","./views/login/index.vue":"9ed6","./views/menu-nesting":"0b50","./views/menu-nesting/":"0b50","./views/menu-nesting/index":"0b50","./views/menu-nesting/index.vue":"0b50","./views/monitor/server":"2a33","./views/monitor/server/":"2a33","./views/monitor/server/index":"2a33","./views/monitor/server/index.vue":"2a33","./views/process/admin/classify":"7110","./views/process/admin/classify.vue":"7110","./views/process/admin/process-manager":"529e","./views/process/admin/process-manager.vue":"529e","./views/process/admin/task-manager":"75fe","./views/process/admin/task-manager.vue":"75fe","./views/process/admin/template-manager":"4792","./views/process/admin/template-manager.vue":"4792","./views/process/list/all":"883d","./views/process/list/all.vue":"883d","./views/process/list/apply-process-list":"7a50","./views/process/list/apply-process-list.vue":"7a50","./views/process/list/components/search":"26d5","./views/process/list/components/search/":"26d5","./views/process/list/components/search/index":"26d5","./views/process/list/components/search/index.vue":"26d5","./views/process/list/create":"8fc3","./views/process/list/create.vue":"8fc3","./views/process/list/handle":"c1a6","./views/process/list/handle.vue":"c1a6","./views/process/list/my-create":"3c50","./views/process/list/my-create.vue":"3c50","./views/process/list/related":"6ea5","./views/process/list/related.vue":"6ea5","./views/process/list/upcoming":"3c30","./views/process/list/upcoming.vue":"3c30","./views/profile":"ecac","./views/profile/":"ecac","./views/profile/components/Account":"e206","./views/profile/components/Account.vue":"e206","./views/profile/components/Activity":"7115","./views/profile/components/Activity.vue":"7115","./views/profile/components/Timeline":"fb8d","./views/profile/components/Timeline.vue":"fb8d","./views/profile/index":"ecac","./views/profile/index.vue":"ecac","./views/profile/resetPwd":"3823","./views/profile/resetPwd.vue":"3823","./views/profile/userAvatar":"88c9","./views/profile/userAvatar.vue":"88c9","./views/profile/userInfo":"2dde","./views/profile/userInfo.vue":"2dde","./views/redirect":"ef3c","./views/redirect/":"ef3c","./views/redirect/index":"ef3c","./views/redirect/index.vue":"ef3c","./views/system/dept":"5cfa","./views/system/dept/":"5cfa","./views/system/dept/index":"5cfa","./views/system/dept/index.vue":"5cfa","./views/system/loginlog":"2ba7","./views/system/loginlog/":"2ba7","./views/system/loginlog/index":"2ba7","./views/system/loginlog/index.vue":"2ba7","./views/system/menu":"f794","./views/system/menu/":"f794","./views/system/menu/index":"f794","./views/system/menu/index.vue":"f794","./views/system/post":"5788","./views/system/post/":"5788","./views/system/post/index":"5788","./views/system/post/index.vue":"5788","./views/system/role":"70eb","./views/system/role/":"70eb","./views/system/role/index":"70eb","./views/system/role/index.vue":"70eb","./views/system/settings":"54f4","./views/system/settings/":"54f4","./views/system/settings/index":"54f4","./views/system/settings/index.vue":"54f4","./views/system/sysuser":"dcb2","./views/system/sysuser/":"dcb2","./views/system/sysuser/index":"dcb2","./views/system/sysuser/index.vue":"dcb2"};function r(e){var t=i(e);return s(t)}function i(e){var t=a[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="a8c4"},acdd:function(e,t,s){"use strict";s("caa2")},ae70:function(e,t,s){},b150:function(e,t,s){"use strict";s.d(t,"i",(function(){return r})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return n})),s.d(t,"a",(function(){return l})),s.d(t,"k",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"j",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"g",(function(){return m})),s.d(t,"l",(function(){return f})),s.d(t,"m",(function(){return v})),s.d(t,"h",(function(){return h}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/sysUserList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/api/v1/sysUser/"+e,method:"get"})}function n(){return Object(a["a"])({url:"/api/v1/sysUser/",method:"get"})}function l(e){return Object(a["a"])({url:"/api/v1/sysUser",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/api/v1/sysUser",method:"put",data:e})}function c(e){return Object(a["a"])({url:"/api/v1/sysUser/"+e,method:"delete"})}function u(e){return Object(a["a"])({url:"/api/v1/sysUser/export",method:"get",params:e})}function d(e,t){var s={userId:e,password:t};return Object(a["a"])({url:"/api/v1/sysUser",method:"put",data:s})}function p(e,t){var s={userId:e,status:t};return Object(a["a"])({url:"/api/v1/sysUser",method:"put",data:s})}function m(){return Object(a["a"])({url:"/api/v1/user/profile",method:"get"})}function f(e,t,s){var r={oldPassword:e,newPassword:t,passwordType:s};return Object(a["a"])({url:"/api/v1/user/pwd",method:"put",data:r})}function v(e){return Object(a["a"])({url:"/api/v1/user/avatar",method:"post",data:e})}function h(){return Object(a["a"])({url:"/api/v1/sysUser/importTemplate",method:"get"})}},b3b3:function(e,t,s){},b602:function(e,t,s){"use strict";s.r(t);s("6b54"),s("4917"),s("c5f6");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rank"},[t("h4",{staticClass:"title"},[e._v("\n    "+e._s(e.title)+"\n    "),t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"工单的处理耗时，注意：仅统计处理节点，审批节点暂未统计。",placement:"top-end"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),e._v(" "),t("ul",{staticClass:"list"},e._l(e.list,(function(s,a){return t("li",{key:a},[t("span",{class:a<3?"active":null},[e._v(e._s(a+1))]),e._v(" "),t("span",[e._v(e._s(s.nickname)+" ("+e._s(s.username)+")")]),e._v(" "),t("span",[e._v("\n        "+e._s(s.cost_duration>60?Number((s.cost_duration/60).toString().match(/^\d+(?:\.\d{0,2})?/))+" 分":s.cost_duration+" 秒")+"\n      ")])])})),0)])},r=[],i={name:"HandlePeriod",props:{title:{type:String,default:""},list:{type:Array,default:null}}},n=i,l=(s("0bc5"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"5d7ae3b6",null);t["default"]=o.exports},b829:function(e,t,s){"use strict";s.r(t);s("386d");var a,r,i={name:"AuthRedirect",created:function(){var e=window.location.search.slice(1);window.localStorage&&(window.localStorage.setItem("x-admin-oauth-code",e),window.close())},render:function(e){return e()}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},bc3f:function(e,t,s){"use strict";s("f034")},bfec:function(e,t,s){"use strict";s("9a73")},c1a6:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[e.isLoadingStatus?t("div"):t("div",[e.activeIndex!==e.nodeStepList.length&&1===e.processStructureValue.workOrder.is_end?t("el-alert",{staticStyle:{"margin-top":"15px"},attrs:{title:e.alertMessage,type:"error",closable:!1}}):e._e(),e._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("公共信息")])]),e._v(" "),t("div",{staticClass:"text item"},[t("el-form",{attrs:{"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"标题:"}},[t("span",[e._v(e._s(e.processStructureValue.workOrder.title))])])],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"优先级:"}},[2===e.processStructureValue.workOrder.priority?t("span",[t("el-tag",{attrs:{type:"warning"}},[e._v("紧急")])],1):3===e.processStructureValue.workOrder.priority?t("span",[t("el-tag",{attrs:{type:"danger"}},[e._v("非常紧急")])],1):t("span",[t("el-tag",{attrs:{type:"success"}},[e._v("一般")])],1)])],1)],1)],1)],1)]),e._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("表单信息")])]),e._v(" "),t("div",{staticClass:"text item"},[e._l(e.processStructureValue.tpls,(function(s,a){return[t("fm-generate-form",{directives:[{name:"show",rawName:"v-show",value:void 0===e.currentNode.hideTpls||null===e.currentNode.hideTpls||-1===e.currentNode.hideTpls.indexOf(s.form_structure.id),expression:"currentNode.hideTpls===undefined ||\n              currentNode.hideTpls===null ||\n              currentNode.hideTpls.indexOf(tplItem.form_structure.id)===-1"}],key:a,ref:"generateForm-"+s.id,refInFor:!0,attrs:{preview:!!(void 0!==e.currentNode.hideTpls&&null!==e.currentNode.hideTpls&&-1!==e.currentNode.hideTpls.indexOf(s.form_structure.id)||void 0===e.currentNode.writeTpls||null===e.currentNode.writeTpls||-1===e.currentNode.writeTpls.indexOf(s.form_structure.id)||e.isActiveProcessing&&e.currentNode.activeOrder),remote:e.remoteFunc,value:s.form_data,data:s.form_structure}})]}))],2),e._v(" "),e.processStructureValue.userAuthority?t("div",[t("hr",{staticStyle:{"background-color":"#d9d9d9",border:"0",height:"1px","margin-bottom":"15px"}}),e._v(" "),t("div",[t("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息",maxlength:"200",autosize:{minRows:3,maxRows:99},"show-word-limit":""},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),e._v(" "),t("div",{staticClass:"text item",staticStyle:{"text-align":"center","margin-top":"18px"}},[e.isActiveProcessing&&e.currentNode.activeOrder?t("div",[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["process:list:handle:active"],expression:"['process:list:handle:active']"}],attrs:{type:"primary"},on:{click:e.activeOrderActive}},[e._v("\n              主动接单\n            ")])],1):t("div",[e._l(e.processStructureValue.edges,(function(s,a){return[0===e.processStructureValue.workOrder.is_end&&s.source===e.currentNode.id?t("el-button",{key:a,attrs:{type:"primary",disabled:e.isSuspend},on:{click:function(t){return e.submitAction(s)}}},[e._v("\n                "+e._s(s.label)+"\n              ")]):e._e()]})),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.suspendAction()}}},[e._v("\n              "+e._s(this.isSuspend?"恢复":"挂起")+"\n            ")])],2)])]):e._e()]),e._v(" "),t("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("工单流转历史")])]),e._v(" "),t("div",{staticClass:"text item"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.circulationHistoryList,border:""}},[t("el-table-column",{attrs:{prop:"state",label:"节点"}}),e._v(" "),t("el-table-column",{attrs:{prop:"circulation",label:"流转"}}),e._v(" "),t("el-table-column",{attrs:{prop:"processor",label:"处理人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"create_time",label:"处理时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"remarks",label:"备注"}})],1)],1)])],1)])},r=[],i=(s("ac6a"),s("5df3"),s("2d63")),n=s("db72"),l=s("c80c"),o=(s("96cf"),s("3b8d")),c=(s("7f7f"),s("2b0e")),u=s("2ced"),d=(s("659a"),s("6da4")),p=s("b150"),m=s("2f62"),f=s("fcb7");c["default"].component(u["a"].name,u["a"]);var v={props:{isSuspend:{type:Boolean,default:!1},disableSubmit:{type:Boolean,default:!1}},data:function(){return{isLoadingStatus:!0,currentNode:{hideTpls:null,writeTpls:null},isActiveProcessing:!1,tpls:[],remarks:"",alertMessage:"",nodeStepList:[],circulationHistoryList:[],activeIndex:0,processStructureValue:{workOrder:{title:""}},ruleForm:{title:"",process:"",classify:"",state_id:"",state:"",source_state:"",processor:"",process_method:"",tpls:[],tasks:[]},remoteFunc:{userList:function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(t){var s,a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["i"])({pageSize:999999});case 2:s=e.sent,a=s.data.list,t(a);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),deptTreeList:function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(t){var s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["d"])();case 2:s=e.sent,t(s.data);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}},computed:Object(n["a"])({},Object(m["b"])(["userId"])),created:function(){this.getProcessNodeList()},methods:{getProcessNodeList:function(){var e=this;Object(d["g"])({processId:this.$route.query.processId,workOrderId:this.$route.query.workOrderId}).then((function(t){if(e.isActiveProcessing=!1,e.processStructureValue=t.data,e.circulationHistoryList=e.processStructureValue.circulationHistory,e.nodeStepList=[],e.processStructureValue.nodes)for(var s=0;s<e.processStructureValue.nodes.length;s++)e.processStructureValue.nodes[s].id===e.processStructureValue.workOrder.current_state?(e.nodeStepList.push(e.processStructureValue.nodes[s]),e.activeIndex=e.nodeStepList.length-1,s+1===e.processStructureValue.nodes.length&&(e.activeIndex=e.nodeStepList.length),e.currentNode=e.processStructureValue.nodes[s]):e.processStructureValue.nodes[s].isHideNode||e.nodeStepList.push(e.processStructureValue.nodes[s]);if(0===e.activeIndex&&"start"===e.currentNode.clazz){e.currentNode.writeTpls=[];var a,r=Object(i["a"])(e.processStructureValue.tpls);try{for(r.s();!(a=r.n()).done;){var n=a.value;e.currentNode.writeTpls.push(n.form_structure.id)}}catch(u){r.e(u)}finally{r.f()}}var l,o=Object(i["a"])(e.processStructureValue.workOrder.state);try{for(o.s();!(l=o.n()).done;){var c=l.value;if(e.processStructureValue.workOrder.current_state===c.id&&(e.isSuspend=c.is_suspend||!1),e.processStructureValue.workOrder.current_state===c.id&&c.processor.length>1){e.isActiveProcessing=!0;break}}}catch(u){o.e(u)}finally{o.f()}e.isLoadingStatus=!1,e.getAlertMessage()}))},submitAction:function(e){var t=this,s=[];this.tpls=[];var a,r=Object(i["a"])(this.processStructureValue.tpls);try{for(r.s();!(a=r.n()).done;){var n=a.value;this.tpls.push({tplDataId:n.id,tplId:n.form_structure.id}),s.push(this.$refs["generateForm-"+n.id][0].getData())}}catch(l){r.e(l)}finally{r.f()}Promise.all(s).then((function(s){for(var a in t.tpls)t.tpls[a].tplValue=s[a];Object(d["e"])({tasks:t.processStructureValue.process.task,source_state:t.processStructureValue.workOrder.current_state,target_state:e.target,circulation:e.label,flow_properties:void 0===e.flowProperties?2:parseInt(e.flowProperties),work_order_id:parseInt(t.$route.query.workOrderId),remarks:t.remarks,is_exec_task:e.isExecuteTask,tpls:t.tpls}).then((function(e){200===e.code&&t.getProcessNodeList()}))}))},suspendAction:function(){var e=this,t={is_suspend:!this.isSuspend,work_order_id:parseInt(this.$route.query.workOrderId),source_state:this.processStructureValue.workOrder.current_state};console.log(JSON.stringify(t)),Object(d["i"])(t).then((function(t){200===t.code&&e.getProcessNodeList()}))},getAlertMessage:function(){1===this.processStructureValue.workOrder.is_end&&(this.alertMessage="当前工单已结束。")},activeOrderActive:function(){var e=this,t=[{id:this.nodeStepList[this.activeIndex].id,label:this.nodeStepList[this.activeIndex].label,process_method:"person",processor:[this.userId]}];Object(d["a"])(t,this.$route.query.workOrderId).then((function(){e.getProcessNodeList()}))}}},h=v,g=s("2877"),b=Object(g["a"])(h,a,r,!1,null,null,null);t["default"]=b.exports},c62e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"social-signup-container"},[t("div",{staticClass:"sign-btn",on:{click:function(t){return e.wechatHandleClick("wechat")}}},[t("span",{staticClass:"wx-svg-container"},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"wechat"}})],1),e._v("\n    WeChat\n  ")]),e._v(" "),t("div",{staticClass:"sign-btn",on:{click:function(t){return e.tencentHandleClick("tencent")}}},[t("span",{staticClass:"qq-svg-container"},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"qq"}})],1),e._v("\n    QQ\n  ")])])},r=[],i={name:"SocialSignin",methods:{wechatHandleClick:function(e){alert("ok")},tencentHandleClick:function(e){alert("ok")}}},n=i,l=(s("bfec"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"7309fbbb",null);t["default"]=o.exports},c81e:function(e,t,s){"use strict";s("956c")},caa2:function(e,t,s){},cb82:function(e,t,s){"use strict";s("08e4")},cc6c:function(e,t,s){e.exports=s.p+"static/web/img/401.089007e7.gif"},ce5c:function(e,t,s){},dcb2:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{staticStyle:{"padding-right":"0"},attrs:{span:4,xs:24}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"head-container"},[t("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{placeholder:"请输入部门名称",clearable:"",size:"small","prefix-icon":"el-icon-search"},model:{value:e.deptName,callback:function(t){e.deptName=t},expression:"deptName"}})],1),e._v(" "),t("div",{staticClass:"head-container"},[t("el-tree",{ref:"tree",attrs:{data:e.deptOptions,props:e.defaultProps,"expand-on-click-node":!1,"filter-node-method":e.filterNode,"default-expand-all":""},on:{"node-click":e.handleNodeClick}})],1)])],1),e._v(" "),t("el-col",{attrs:{span:20,xs:24}},[t("el-card",{staticClass:"box-card"},[t("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[t("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.username,callback:function(t){e.$set(e.queryParams,"username",t)},expression:"queryParams.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入手机号码",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.phone,callback:function(t){e.$set(e.queryParams,"phone",t)},expression:"queryParams.phone"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),e._v(" "),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:add"],expression:"['system:sysuser:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:edit"],expression:"['system:sysuser:edit']"}],attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("编辑")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:remove"],expression:"['system:sysuser:remove']"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList,border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"编号",width:"50",align:"center",prop:"userId"}}),e._v(" "),t("el-table-column",{attrs:{label:"用户名称",align:"center",prop:"username","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"用户昵称",align:"center",prop:"nickName","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{label:"手机号码",align:"center",prop:"phone",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{label:"状态",width:"68",align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-switch",{attrs:{"active-value":"0","inactive-value":"1"},on:{change:function(t){return e.handleStatusChange(s.row)}},model:{value:s.row.status,callback:function(t){e.$set(s.row,"status",t)},expression:"scope.row.status"}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"165"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:edit"],expression:"['system:sysuser:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(s.row)}}},[e._v("编辑")]),e._v(" "),"admin"!==s.row.username?t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:remove"],expression:"['system:sysuser:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")]):e._e(),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysuser:resetPassword"],expression:"['system:sysuser:resetPassword']"}],attrs:{size:"mini",type:"text",icon:"el-icon-key"},on:{click:function(t){return e.handleResetPwd(s.row)}}},[e._v("重置")])]}}])})],1),e._v(" "),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageIndex,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageIndex",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px"},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"用户名称",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名称"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"用户昵称",prop:"nickName"}},[t("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[void 0==e.form.userId?t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"用户密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入用户密码",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e()],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"手机号码",prop:"phone"}},[t("el-input",{attrs:{placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入邮箱",maxlength:"50"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"角色"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleOptions,(function(e){return t("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId,disabled:1==e.status}})})),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"归属部门",prop:"deptId"}},[t("treeselect",{attrs:{options:e.deptOptions,normalizer:e.normalizer,placeholder:"请选择归属部门"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"岗位"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form.postId,callback:function(t){e.$set(e.form,"postId",t)},expression:"form.postId"}},e._l(e.postOptions,(function(e){return t("el-option",{key:e.postId,attrs:{label:e.postName,value:e.postId,disabled:1==e.status}})})),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticStyle:{width:"95%"},attrs:{label:"备注"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px"},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[t("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.upload.headers,action:e.upload.url+"?updateSupport="+e.upload.updateSupport,disabled:e.upload.isUploading,"on-progress":e.handleFileUploadProgress,"on-success":e.handleFileSuccess,"auto-upload":!1,drag:""}},[t("i",{staticClass:"el-icon-upload"}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("\n        将文件拖到此处，或\n        "),t("em",[e._v("点击上传")])]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("el-checkbox",{model:{value:e.upload.updateSupport,callback:function(t){e.$set(e.upload,"updateSupport",t)},expression:"upload.updateSupport"}}),e._v("是否更新已经存在的用户数据\n        "),t("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"info"},on:{click:e.importTemplate}},[e._v("下载模板")])],1),e._v(" "),t("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("b150"),n=s("5f87"),l=s("fcb7"),o=s("ca17"),c=s.n(o),u=(s("542c"),{name:"User",components:{Treeselect:c.a},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,total:0,userList:null,title:"",deptOptions:void 0,open:!1,deptName:void 0,dateRange:[],postOptions:[],roleOptions:[],form:{},defaultProps:{children:"children",label:"deptName"},upload:{open:!1,title:"",isUploading:!1,updateSupport:0,headers:{Authorization:"Bearer "+Object(n["a"])()},url:"http://10.140.96.47:8002/system/user/importData"},queryParams:{pageIndex:1,pageSize:10,username:void 0,phone:void 0,status:void 0,deptId:void 0},rules:{username:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],deptId:[{required:!0,message:"归属部门不能为空",trigger:"blur"}],password:[{required:!0,message:"用户密码不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},watch:{deptName:function(e){this.$refs.tree.filter(e)}},created:function(){this.getList(),this.getTreeselect()},methods:{getList:function(){var e=this;this.loading=!0,Object(i["i"])(this.addDateRange(this.queryParams,this.dateRange)).then((function(t){e.userList=t.data.list,e.total=t.data.count,e.loading=!1}))},getTreeselect:function(){var e=this;Object(l["g"])().then((function(t){e.deptOptions=t.data}))},filterNode:function(e,t){return!e||-1!==t.deptName.indexOf(e)},handleNodeClick:function(e){this.queryParams.deptId=e.deptId,this.getList()},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.deptId,label:e.deptName,children:e.children}},handleStatusChange:function(e){var t=this,s="0"===e.status?"启用":"停用";this.$confirm('确认要"'+s+'""'+e.username+'"用户吗?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.userId,e.status)})).then((function(){t.msgSuccess(s+"成功")})).catch((function(){e.status="0"===e.status?"1":"0"}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={userId:void 0,deptId:void 0,username:void 0,nickName:void 0,password:void 0,phone:void 0,email:void 0,sex:void 0,status:"0",remark:void 0,postIds:void 0,roleIds:void 0},this.resetForm("form")},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.userId})),this.single=1!==e.length,this.multiple=!e.length},handleAdd:function(){var e=this;this.reset(),this.getTreeselect(),Object(i["f"])().then((function(t){e.postOptions=t.data.posts,e.roleOptions=t.data.roles,e.open=!0,e.title="添加用户",e.form.password="123456"}))},handleUpdate:function(e){var t=this;this.reset(),this.getTreeselect();var s=e.userId||this.ids;Object(i["e"])(s).then((function(e){t.form=e.data,t.postOptions=e.posts,t.roleOptions=e.roles,t.form.postIds=e.postIds[0],t.form.roleIds=e.roleIds[0],t.open=!0,t.title="修改用户",t.form.password=""}))},handleResetPwd:function(e){var t=this;this.$prompt('请输入"'+e.username+'"的新密码',"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(s){var a=s.value;Object(i["j"])(e.userId,a).then((function(e){200===e.code?t.msgSuccess("修改成功，新密码是："+a):t.msgError(e.msg)}))})).catch((function(){}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.userId?Object(i["k"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):Object(i["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))}))},handleDelete:function(e){var t=this,s=e.userId||this.ids;this.$confirm('是否确认删除用户编号为"'+s+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["c"])(s)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){var e=this,t=this.queryParams;this.$confirm("是否确认导出所有用户数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["d"])(t)})).then((function(t){e.download(t.msg)})).catch((function(){}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},importTemplate:function(){var e=this;Object(i["h"])().then((function(t){e.download(t.msg)}))},handleFileUploadProgress:function(e,t,s){this.upload.isUploading=!0},handleFileSuccess:function(e,t,s){this.upload.open=!1,this.upload.isUploading=!1,this.$refs.upload.clearFiles(),this.$alert(e.msg,"导入结果",{dangerouslyUseHTMLString:!0}),this.getList()},submitFileForm:function(){this.$refs.upload.submit()}}}),d=u,p=s("2877"),m=Object(p["a"])(d,a,r,!1,null,null,null);t["default"]=m.exports},e206:function(e,t,s){"use strict";s.r(t);s("7f7f");var a=function(){var e=this,t=e._self._c;return t("el-form",[t("el-form-item",{attrs:{label:"Name"}},[t("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name","string"===typeof t?t.trim():t)},expression:"user.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Email"}},[t("el-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email","string"===typeof t?t.trim():t)},expression:"user.email"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Update")])],1)],1)},r=[],i={props:{user:{type:Object,default:function(){return{name:"",email:""}}}},methods:{submit:function(){this.$message({message:"User information has been updated successfully",type:"success",duration:5e3})}}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},e8ba:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{class:e.className,staticStyle:{padding:"0 25px 20px 20px"},style:{height:e.height,width:e.width}})},r=[],i=s("313e"),n=s.n(i),l=s("a7dc"),o={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},statisticsData:{type:Object,default:function(){return{}},required:!0}},data:function(){return{chart:null}},watch:{statisticsData:{deep:!0,handler:function(e){this.setOptions(e)}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=n.a.init(this.$el,"macarons"),this.setOptions(this.statisticsData)},setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.expectedData,e.actualData;this.chart.setOption({title:{textStyle:{fontSize:15}},tooltip:{trigger:"axis"},legend:{data:["工单总数","未结束","已结束"]},grid:{left:"25",right:"35",bottom:"20",top:"50",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.statisticsData.datetime},yAxis:{type:"value"},series:[{name:"工单总数",type:"line",data:this.statisticsData.total},{name:"未结束",type:"line",data:this.statisticsData.processing},{name:"已结束",type:"line",data:this.statisticsData.overs}]})}}},c=o,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},ea29:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rank"},[t("h4",{staticClass:"title"},[e._v("\n    "+e._s(e.title)+"\n    "),t("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"按照工单处理节点进行统计，一个工单可能会有多个处理节点。",placement:"top-end"},slot:"action"},[t("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),e._v(" "),t("ul",{staticClass:"list"},e._l(e.list,(function(s,a){return t("li",{key:a},[t("span",{class:a<3?"active":null},[e._v(e._s(a+1))]),e._v(" "),t("span",[e._v(e._s(s.nickname)+" ("+e._s(s.username)+")")]),e._v(" "),t("span",[e._v(e._s(s.count))])])})),0)])},r=[],i={name:"HandleRank",props:{title:{type:String,default:""},list:{type:Array,default:null}}},n=i,l=(s("690f"),s("2877")),o=Object(l["a"])(n,a,r,!1,null,"36f1541f",null);t["default"]=o.exports},ebe1:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block"}},[t("label",{staticClass:"radio-label"},[e._v("Book Type: ")]),e._v(" "),t("el-select",{staticStyle:{width:"120px"},model:{value:e.bookType,callback:function(t){e.bookType=t},expression:"bookType"}},e._l(e.options,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)},r=[],i={props:{value:{type:String,default:"xlsx"}},data:function(){return{options:["xlsx","csv","txt"]}},computed:{bookType:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},ecac:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6,xs:24}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("个人信息")])]),e._v(" "),t("div",[t("div",{staticClass:"text-center"},[t("userAvatar",{attrs:{user:e.user}})],1),e._v(" "),t("ul",{staticClass:"list-group list-group-striped"},[t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"user"}}),e._v(" 用户名称\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.username))])],1),e._v(" "),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"phone"}}),e._v(" 手机号码\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.phone))])],1),e._v(" "),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"email"}}),e._v(" 用户邮箱\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.email))])],1),e._v(" "),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"tree"}}),e._v(" 所属部门\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.deptName))])],1),e._v(" "),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v(" 所属角色\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.roleName))])],1),e._v(" "),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"date"}}),e._v(" 创建日期\n              "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.parseTime(e.user.create_time)))])],1)])])])],1),e._v(" "),t("el-col",{attrs:{span:18,xs:24}},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("基本资料")])]),e._v(" "),t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[t("userInfo",{attrs:{user:e.user}})],1),e._v(" "),t("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[t("resetPwd",{attrs:{user:e.user}})],1)],1)],1)],1)],1)],1)},r=[],i=s("88c9"),n=s("2dde"),l=s("3823"),o=s("b150"),c={name:"Profile",components:{userAvatar:i["default"],userInfo:n["default"],resetPwd:l["default"]},data:function(){return{user:{},roleGroup:{},postGroup:{},deptGroup:{},activeTab:"userinfo",roleIds:void 0,postIds:void 0,roleName:void 0,postName:void 0,dept:{},deptName:void 0}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(o["g"])().then((function(t){if(e.user=t.data,e.roleIds=t.roleIds,e.roleGroup=t.roles,e.roleIds[0])for(var s in e.roleGroup)e.roleIds[0]===e.roleGroup[s].roleId&&(e.roleName=e.roleGroup[s].roleName);else e.roleName="暂无";e.dept=t.dept,e.deptName=e.dept.deptName}))}}},u=c,d=s("2877"),p=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=p.exports},edd9:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"f",(function(){return i})),s.d(t,"g",(function(){return n})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return u}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/process",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/api/v1/process",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/v1/process",method:"put",data:e})}function l(e){return Object(a["a"])({url:"/api/v1/process",method:"delete",params:e})}function o(e){return Object(a["a"])({url:"/api/v1/process/details",method:"get",params:e})}function c(e){return Object(a["a"])({url:"/api/v1/process/classify",method:"get",params:e})}function u(e){return Object(a["a"])({url:"/api/v1/process/clone/".concat(e),method:"post"})}},ef3c:function(e,t,s){"use strict";s.r(t);s("a481");var a,r,i={created:function(){var e=this.$route,t=e.params,s=e.query,a=t.path;this.$router.replace({path:"/"+a,query:s})},render:function(e){return e()}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},f034:function(e,t,s){},f794:function(e,t,s){"use strict";s.r(t);s("55dd");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-card",{staticClass:"box-card"},[t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"菜单名称"}},[t("el-input",{attrs:{placeholder:"请输入菜单名称",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleQuery}},[e._v("搜索")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysmenu:add"],expression:"['system:sysmenu:add']"}],attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.menuList,"row-key":"menuId","tree-props":{children:"children",hasChildren:"hasChildren"}}},[t("el-table-column",{attrs:{prop:"title",label:"菜单名称","show-overflow-tooltip":!0,width:"180px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"icon",label:"图标",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("svg-icon",{attrs:{"icon-class":e.row.icon}})]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"sort",label:"排序",width:"60px"}}),e._v(" "),t("el-table-column",{attrs:{prop:"permission",label:"权限标识","show-overflow-tooltip":!0}}),e._v(" "),t("el-table-column",{attrs:{prop:"path",label:"路径","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(s){return["A"==s.row.menuType?t("span",[e._v(e._s(s.row.path))]):t("span",[e._v(e._s(s.row.component))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"visible",label:"可见",formatter:e.visibleFormat,width:"80"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-tag",{attrs:{type:"1"===s.row.visible?"danger":"success","disable-transitions":""}},[e._v(e._s(e.visibleFormat(s.row)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"create_time",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("span",[e._v(e._s(e.parseTime(s.row.create_time)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"180"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysmenu:edit"],expression:"['system:sysmenu:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(s.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysmenu:add"],expression:"['system:sysmenu:add']"}],attrs:{size:"mini",type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd(s.row)}}},[e._v("新增")]),e._v(" "),t("el-button",{directives:[{name:"permisaction",rawName:"v-permisaction",value:["system:sysmenu:remove"],expression:"['system:sysmenu:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,visible:e.open,width:"800px"},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticStyle:{width:"95%"},attrs:{label:"上级菜单"}},[t("treeselect",{attrs:{options:e.menuOptions,normalizer:e.normalizer,"show-count":!0,placeholder:"选择上级菜单"},model:{value:e.form.parentId,callback:function(t){e.$set(e.form,"parentId",t)},expression:"form.parentId"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"菜单标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入菜单标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"显示排序",prop:"sort"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"菜单类型",prop:"menuType"}},[t("el-radio-group",{model:{value:e.form.menuType,callback:function(t){e.$set(e.form,"menuType",t)},expression:"form.menuType"}},[t("el-radio",{attrs:{label:"M"}},[e._v("目录")]),e._v(" "),t("el-radio",{attrs:{label:"C"}},[e._v("菜单")]),e._v(" "),t("el-radio",{attrs:{label:"F"}},[e._v("按钮")]),e._v(" "),t("el-radio",{attrs:{label:"A"}},[e._v("接口")])],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},["A"==e.form.menuType?t("el-form-item",{attrs:{label:"请求方式"}},[t("el-radio-group",{model:{value:e.form.action,callback:function(t){e.$set(e.form,"action",t)},expression:"form.action"}},[t("el-radio",{attrs:{label:"GET"}},[e._v("GET")]),e._v(" "),t("el-radio",{attrs:{label:"POST"}},[e._v("POST")]),e._v(" "),t("el-radio",{attrs:{label:"PUT"}},[e._v("PUT")]),e._v(" "),t("el-radio",{attrs:{label:"DELETE"}},[e._v("DELETE")])],1)],1):e._e()],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticStyle:{width:"95%"},attrs:{label:"菜单图标"}},[t("el-popover",{attrs:{placement:"bottom-start",width:"460",trigger:"click"},on:{show:function(t){return e.$refs["iconSelect"].reset()}}},[t("IconSelect",{ref:"iconSelect",on:{selected:e.selected}}),e._v(" "),t("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}},[e.form.icon?t("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":e.form.icon},slot:"prefix"}):t("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1)],1),e._v(" "),t("el-col",{attrs:{span:12}},["M"==e.form.menuType||"C"==e.form.menuType?t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"路由名称",prop:"menuName"}},[t("el-input",{attrs:{placeholder:"请输入路由名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1):e._e()],1),e._v(" "),"M"==e.form.menuType||"C"==e.form.menuType?t("el-col",{attrs:{span:12}},[t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"组件路径",prop:"component"}},[t("el-input",{attrs:{placeholder:"请输入组件路径"},model:{value:e.form.component,callback:function(t){e.$set(e.form,"component",t)},expression:"form.component"}})],1)],1):e._e(),e._v(" "),t("el-col",{attrs:{span:12}},["M"==e.form.menuType||"C"==e.form.menuType?t("el-form-item",{attrs:{label:"是否外链"}},[t("el-radio-group",{model:{value:e.form.isFrame,callback:function(t){e.$set(e.form,"isFrame",t)},expression:"form.isFrame"}},[t("el-radio",{attrs:{label:"0"}},[e._v("是")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("否")])],1)],1):e._e()],1),e._v(" "),t("el-col",{attrs:{span:12}},["F"!=e.form.menuType?t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"路由地址",prop:"path"}},[t("el-input",{attrs:{placeholder:"请输入路由地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1):e._e()],1),e._v(" "),t("el-col",{attrs:{span:12}},["F"==e.form.menuType||"C"==e.form.menuType?t("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"权限标识"}},[t("el-input",{attrs:{placeholder:"请权限标识",maxlength:"50"},model:{value:e.form.permission,callback:function(t){e.$set(e.form,"permission",t)},expression:"form.permission"}})],1):e._e()],1),e._v(" "),t("el-col",{attrs:{span:24}},["F"!=e.form.menuType?t("el-form-item",{attrs:{label:"菜单状态"}},[t("el-radio-group",{model:{value:e.form.visible,callback:function(t){e.$set(e.form,"visible",t)},expression:"form.visible"}},e._l(e.visibleOptions,(function(s){return t("el-radio",{key:s.dictValue,attrs:{label:s.dictValue}},[e._v(e._s(s.dictLabel))])})),1)],1):e._e()],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},r=[],i=s("a6dc"),n=s("ca17"),l=s.n(n),o=(s("542c"),s("7f7f"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon-body"},[t("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:e.filterIcons},nativeOn:{input:function(t){return e.filterIcons.apply(null,arguments)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[t("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),t("div",{staticClass:"icon-list"},e._l(e.iconList,(function(s,a){return t("div",{key:a,on:{click:function(t){return e.selectedIcon(s)}}},[t("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":s}}),e._v(" "),t("span",[e._v(e._s(s))])],1)})),0)],1)}),c=[],u=(s("6762"),s("2fdb"),s("4917"),s("ac6a"),s("51ff")),d=function(e){return e.keys()},p=/\.\/(.*)\.svg/,m=d(u).map((function(e){return e.match(p)[1]})),f=m,v={name:"IconSelect",data:function(){return{name:"",iconList:f}},methods:{filterIcons:function(){var e=this;this.name?this.iconList=this.iconList.filter((function(t){return t.includes(e.name)})):this.iconList=f},selectedIcon:function(e){this.$emit("selected",e),document.body.click()},reset:function(){this.name="",this.iconList=f}}},h=v,g=(s("6efe"),s("2877")),b=Object(g["a"])(h,o,c,!1,null,"29eae0d6",null),y=b.exports,_={name:"Menu",components:{Treeselect:l.a,IconSelect:y},data:function(){return{loading:!0,menuList:[],menuOptions:[],title:"",open:!1,visibleOptions:[{dictValue:"0",dictLabel:"显示"},{dictValue:"1",dictLabel:"隐藏"}],queryParams:{title:void 0,visible:void 0},form:{},rules:{title:[{required:!0,message:"菜单标题不能为空",trigger:"blur"}],sort:[{required:!0,message:"菜单顺序不能为空",trigger:"blur"}]}}},created:function(){this.getList()},methods:{selected:function(e){this.form.icon=e},getList:function(){var e=this;this.loading=!0,Object(i["d"])(this.queryParams).then((function(t){e.menuList=t.data,e.loading=!1}))},normalizer:function(e){return e.children&&!e.children.length&&delete e.children,{id:e.menuId,label:e.title,children:e.children}},getTreeselect:function(){var e=this;Object(i["d"])().then((function(t){e.menuOptions=[];var s={menuId:0,title:"主类目",children:[]};s.children=t.data,e.menuOptions.push(s)}))},visibleFormat:function(e){return"F"===e.menuType?"-- --":"1"===e.visible?"隐藏":"0"===e.visible?"可见":void 0},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={menuId:void 0,parentId:0,menuName:void 0,icon:void 0,menuType:"M",sort:0,action:"A"===this.form.menuType?this.form.action:"",isFrame:"1",visible:"0"},this.resetForm("form")},handleQuery:function(){this.getList()},handleAdd:function(e){this.reset(),this.getTreeselect(),null!=e&&(this.form.parentId=e.menuId),this.open=!0,this.title="添加菜单"},handleUpdate:function(e){var t=this;this.reset(),this.getTreeselect(),Object(i["c"])(e.menuId).then((function(e){t.form=e.data,t.open=!0,t.title="修改菜单"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!==e.form.menuId?Object(i["g"])(e.form).then((function(t){200===t.code?(e.msgSuccess("修改成功"),e.open=!1,e.getList()):e.msgError(t.msg)})):Object(i["a"])(e.form).then((function(t){200===t.code?(e.msgSuccess("新增成功"),e.open=!1,e.getList()):e.msgError(t.msg)})))}))},handleDelete:function(e){var t=this;this.$confirm('是否确认删除名称为"'+e.title+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(i["b"])(e.menuId)})).then((function(){t.getList(),t.msgSuccess("删除成功")})).catch((function(){}))}}},w=_,x=Object(g["a"])(w,a,r,!1,null,null,null);t["default"]=x.exports},fb8d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"block"},[t("el-timeline",e._l(e.timeline,(function(s,a){return t("el-timeline-item",{key:a,attrs:{timestamp:s.timestamp,placement:"top"}},[t("el-card",[t("h4",[e._v(e._s(s.title))]),e._v(" "),t("p",[e._v(e._s(s.content))])])],1)})),1)],1)},r=[],i={data:function(){return{timeline:[{timestamp:"2019/4/20",title:"Update Github template",content:"PanJiaChen committed 2019/4/20 20:46"},{timestamp:"2019/4/21",title:"Update Github template",content:"PanJiaChen committed 2019/4/21 20:46"},{timestamp:"2019/4/22",title:"Build Template",content:"PanJiaChen committed 2019/4/22 20:46"},{timestamp:"2019/4/23",title:"Release New Version",content:"PanJiaChen committed 2019/4/23 20:46"}]}}},n=i,l=s("2877"),o=Object(l["a"])(n,a,r,!1,null,null,null);t["default"]=o.exports},fcb7:function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"g",(function(){return l})),s.d(t,"f",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"h",(function(){return u})),s.d(t,"b",(function(){return d}));var a=s("b775");function r(e){return Object(a["a"])({url:"/api/v1/deptList",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/api/v1/ordinaryDeptList",method:"get",params:e})}function n(e){return Object(a["a"])({url:"/api/v1/dept/"+e,method:"get"})}function l(){return Object(a["a"])({url:"/api/v1/deptTree",method:"get"})}function o(e){return Object(a["a"])({url:"/api/v1/roleDeptTreeselect/"+e,method:"get"})}function c(e){return Object(a["a"])({url:"/api/v1/dept",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/api/v1/dept",method:"put",data:e})}function d(e){return Object(a["a"])({url:"/api/v1/dept/"+e,method:"delete"})}},fe22:function(e,t,s){"use strict";s("45e1")}}]);